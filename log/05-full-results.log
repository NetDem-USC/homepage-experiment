
R version 4.0.2 (2020-06-22) -- "Taking Off Again"
Copyright (C) 2020 The R Foundation for Statistical Computing
Platform: x86_64-apple-darwin17.0 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

[Previously saved workspace restored]

> #===============================================================================
> #  File:    05-full-results.R
> #  Date:    Feb 3, 2021
> #  Purpose: replicate appendix analyses: Section 4 Full results
> #  Data In: 
> #           ./data/survey_data.csv
> #           ./data/daily_pulse_data.csv
> #===============================================================================
> 
> # PACKAGES
> #===============================================================================
> library(tidyverse)
── Attaching packages ─────────────────────────────────────── tidyverse 1.3.0 ──
✔ ggplot2 3.3.2     ✔ purrr   0.3.4
✔ tibble  3.0.6     ✔ dplyr   1.0.3
✔ tidyr   1.1.2     ✔ stringr 1.4.0
✔ readr   1.4.0     ✔ forcats 0.5.1
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
> library(estimatr)
> library(glmnet)
Loading required package: Matrix

Attaching package: ‘Matrix’

The following objects are masked from ‘package:tidyr’:

    expand, pack, unpack

Loaded glmnet 4.0-2
> library(powerLATE)
powerLATE: Generalized Power Analysis for LATE
Version: 0.1.1
Reference: Bansak, K. (2020). A Generalized Approach to Power Analysis for Local Average Treatment Effects. Statistical Science, 35(2), 254-271.

> library(haven)
> # install.packages("BiocManager")
> # BiocManager::install("multtest")
> library(multtest)
Loading required package: BiocGenerics
Loading required package: parallel

Attaching package: ‘BiocGenerics’

The following objects are masked from ‘package:parallel’:

    clusterApply, clusterApplyLB, clusterCall, clusterEvalQ,
    clusterExport, clusterMap, parApply, parCapply, parLapply,
    parLapplyLB, parRapply, parSapply, parSapplyLB

The following objects are masked from ‘package:dplyr’:

    combine, intersect, setdiff, union

The following objects are masked from ‘package:stats’:

    IQR, mad, sd, var, xtabs

The following objects are masked from ‘package:base’:

    anyDuplicated, append, as.data.frame, basename, cbind, colnames,
    dirname, do.call, duplicated, eval, evalq, Filter, Find, get, grep,
    grepl, intersect, is.unsorted, lapply, Map, mapply, match, mget,
    order, paste, pmax, pmax.int, pmin, pmin.int, Position, rank,
    rbind, Reduce, rownames, sapply, setdiff, sort, table, tapply,
    union, unique, unsplit, which.max, which.min

Loading required package: Biobase
Welcome to Bioconductor

    Vignettes contain introductory material; view with
    'browseVignettes()'. To cite Bioconductor, see
    'citation("Biobase")', and for packages 'citation("pkgname")'.

Warning messages:
1: package ‘multtest’ was built under R version 4.0.3 
2: package ‘BiocGenerics’ was built under R version 4.0.3 
3: package ‘Biobase’ was built under R version 4.0.3 
> library(plot.matrix)
> source('code/functions.r')
> 
> # DATA
> #===============================================================================
> pulse <- read_csv("data/daily_pulse_data.csv")

── Column specification ────────────────────────────────────────────────────────
cols(
  .default = col_double(),
  id = col_character(),
  date = col_date(format = "")
)
ℹ Use `spec()` for the full column specifications.

> svy <- read_csv("data/survey_data.csv")

── Column specification ────────────────────────────────────────────────────────
cols(
  .default = col_double(),
  id = col_character(),
  partylean = col_character(),
  raceeth = col_character(),
  employ = col_character(),
  W1_endtime = col_datetime(format = ""),
  W2_endtime = col_datetime(format = ""),
  W3_PATA306_treatment_w3 = col_character(),
  W3_Browser_treatment_w3 = col_character(),
  starttime_w3 = col_datetime(format = ""),
  endtime_w3 = col_datetime(format = ""),
  endtime = col_datetime(format = ""),
  W5_endtime = col_datetime(format = ""),
  W6_endtime = col_datetime(format = ""),
  endtime_w7 = col_datetime(format = ""),
  endtime_w8 = col_datetime(format = ""),
  predicted_house_winner_gop = col_logical(),
  predicted_district_winner_gop = col_logical(),
  predicted_house_winner_dem = col_logical(),
  predicted_district_winner_dem = col_logical()
)
ℹ Use `spec()` for the full column specifications.

> 
> # Dropping observations where treatment is missing
> svy <- svy[!is.na(svy$W3_PATA306_treatment_w3),]
> 
> 
> # Preparation for multiple hypothesis testing corrections ----------
> 
> # set up containers to collect p values
> dv_fn_vec <- character()
> dv_hp_vec <- character()
> dim_fn_pval_vec <- character()
> dim_hp_pval_vec <- character()
> itt_fn_pval_vec <- character()
> itt_hp_pval_vec <- character()
> cace_fn_pval_vec <- character()
> cace_hp_pval_vec <- character()
> itt_fn_cohd_vec <- character()
> itt_hp_cohd_vec <- character()
> hypothesis_fn_vec <- character()
> hypothesis_hp_vec <- character()
> hypothesis_all_vec <- character()
> prereg_fn_vec <- character()
> prereg_hp_vec <- character()
> dv_any_vec <- character()
> dim_any_pval_vec <- character()
> itt_any_pval_vec <- character()
> cace_any_pval_vec <- character()
> itt_any_cohd_vec <- character()
> #cace_any_cohd_vec <- character()
> hypothesis_any_vec <- character()
> prereg_any_vec <- character()
> 
> 
> # function to collect pvals
> update_pvals <- function(dv, trt, dim, itt, cace, prereg = "", hypothesis = "") {
+   if(trt == "FoxNews"){
+     dv_fn_vec[length(dv_fn_vec) +1] <<- dv
+     dim_fn_pval_vec[length(dim_fn_pval_vec) +1] <<- dim[["p.value"]]
+     itt_fn_pval_vec[length(itt_fn_pval_vec) +1] <<- itt[["p.value"]][2]
+     cace_fn_pval_vec[length(cace_fn_pval_vec) +1] <<- cace[["p.value"]][2]
+     itt_fn_cohd_vec[length(itt_fn_cohd_vec) +1] <<- pwr$pwr_itt[2]
+     prereg_fn_vec[length(prereg_fn_vec) +1] <<- prereg
+     hypothesis_fn_vec[length(hypothesis_fn_vec) +1] <<- hypothesis
+   }
+   if(trt == "HuffPost"){
+     dv_hp_vec[length(dv_hp_vec) +1] <<- dv
+     dim_hp_pval_vec[length(dim_hp_pval_vec) +1] <<- dim[["p.value"]]
+     itt_hp_pval_vec[length(itt_hp_pval_vec) +1] <<- itt[["p.value"]][2]
+     cace_hp_pval_vec[length(cace_hp_pval_vec) +1] <<- cace[["p.value"]][2]
+     itt_hp_cohd_vec[length(itt_hp_cohd_vec) +1] <<- pwr$pwr_itt[2]
+     prereg_hp_vec[length(prereg_hp_vec) +1] <<- prereg
+     hypothesis_hp_vec[length(hypothesis_hp_vec) +1] <<- hypothesis
+   }
+   if(!(trt %in% c("FoxNews", "HuffPost"))){
+     dv_any_vec[length(dv_any_vec) +1] <<- dv
+     dim_any_pval_vec[length(dim_any_pval_vec) +1] <<- dim[["p.value"]]
+     itt_any_pval_vec[length(itt_any_pval_vec) +1] <<- itt[["p.value"]][2]
+     cace_any_pval_vec[length(cace_any_pval_vec) +1] <<- cace[["p.value"]][2]
+     itt_any_cohd_vec[length(itt_any_cohd_vec) +1] <<- pwr$pwr_itt[2]
+     prereg_any_vec[length(prereg_any_vec) +1] <<- prereg
+     hypothesis_any_vec[length(hypothesis_any_vec) +1] <<- hypothesis
+   }
+   hypothesis_all_vec[length(hypothesis_all_vec) +1] <<- hypothesis
+ }
> 
> # Analysis ----------------------------------------------------------------
> 
> # https://declaredesign.org/blog/biased-fixed-effects.html
> 
> vars <- c("party7", "age", "agesq", "female", "raceeth", "educ",
+           "ideo", "income", "employ", "state", "polint", "freq_tv", "freq_np", 
+           "freq_rad", "freq_net", "freq_disc", "log_news_pre", "diet_mean_pre")
> 
> ########################################################
> ### Issue H1: issue opinions, Fox News treatment
> ########################################################
> 
> trt <- "FoxNews"
> dv <- "issue_scale"
> dv_pre <- "issue_scale_pre"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error   t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews 0.02458786 0.08627154 0.2850054 0.7757493
                                 CI Lower  CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.1448811 0.1940568 540
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: -0.044
Std. Error: 0.036
CI Lower: -0.114
CI Upper: 0.027
Pre-treatment DV, Adj R2 = 0.826
N = 552
Lasso covariates, Adj R2 = 0.841
Covariates: party7 + ideo + issue_scale_pre
N = 542
All covariates, Adj R2 = 0.843
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 384
> compute_proportion_missing_covars(itt)
2.2% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.173 (16.9% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo + issue_scale_pre
0.072 (7.0% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H1: Conservatism")
H1: Conservatism & 0.025 (0.086) & -0.044 (0.036) & -0.130 (0.165) & 0.072\\ 
(FoxNews) & [-0.145, 0.194] & [-0.114, 0.027] & [-0.454, 0.193] & ($d$=0.070)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 1", hypothesis = "Issue Opinions H1")
> 
> 
> ########################################################
> ### Issue H2: issue opinions, HuffPost treatment
> ########################################################
> 
> trt <- "HuffPost"
> dv <- "issue_scale"
> dv_pre <- "issue_scale_pre"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error   t value  Pr(>|t|)
W3_PATA306_treatment_w3HuffPost -0.1102215 0.08550942 -1.288998 0.1979426
                                  CI Lower   CI Upper  DF
W3_PATA306_treatment_w3HuffPost -0.2781878 0.05774488 548
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: -0.035
Std. Error: 0.036
CI Lower: -0.106
CI Upper: 0.036
Pre-treatment DV, Adj R2 = 0.813
N = 560
Lasso covariates, Adj R2 = 0.831
Covariates: party7 + ideo + issue_scale_pre
N = 544
All covariates, Adj R2 = 0.843
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 383
> compute_proportion_missing_covars(itt)
2.2% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.172 (16.8% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo + issue_scale_pre
0.072 (7.0% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H2: Conservatism")
H2: Conservatism & -0.110 (0.086) & -0.035 (0.036) & -0.066 (0.140) & 0.072\\ 
(HuffPost) & [-0.278, 0.058] & [-0.106, 0.036] & [-0.341, 0.209] & ($d$=0.070)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 1", hypothesis = "Issue Opinions H2")
> 
> 
> ########################################################
> ### Issue H3: immigration attitudes, FoxNews treatment
> ########################################################
> 
> trt <- "FoxNews"
> dv <- "imm_issue_scale"
> dv_pre <- "issue_scale_pre"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error   t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews 0.07263141 0.07685173 0.9450848 0.3449493
                                  CI Lower CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.07826222 0.223525 684
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt, more_vars = "policy14_imm_pre")
Estimate: 0.032
Std. Error: 0.048
CI Lower: -0.063
CI Upper: 0.126
Pre-treatment DV, Adj R2 = 0.329
N = 696
Lasso covariates, Adj R2 = 0.608
Covariates: party7 + ideo + issue_scale_pre + policy14_imm_pre
N = 680
All covariates, Adj R2 = 0.504
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.152 (15.0% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo + issue_scale_pre + policy14_imm_pre
0.097 (9.5% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H3: Pro-immigration")
H3: Pro-immigration & 0.073 (0.077) & 0.032 (0.048) & 0.282 (0.210) & 0.097\\ 
(FoxNews) & [-0.078, 0.224] & [-0.063, 0.126] & [-0.130, 0.695] & ($d$=0.095)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 1", hypothesis = "Issue Opinions H3")
> 
> 
> ########################################################
> ### Issue H4: immigration attitudes, HuffPost treatment
> ########################################################
> 
> trt <- "HuffPost"
> dv <- "imm_issue_scale"
> dv_pre <- "issue_scale_pre"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error  t value    Pr(>|t|)
W3_PATA306_treatment_w3HuffPost 0.2274058 0.07620662 2.984069 0.002945784
                                  CI Lower  CI Upper  DF
W3_PATA306_treatment_w3HuffPost 0.07777885 0.3770328 684
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt, more_vars = "policy14_imm_pre")
Estimate: 0.072
Std. Error: 0.049
CI Lower: -0.024
CI Upper: 0.167
Pre-treatment DV, Adj R2 = 0.391
N = 696
Lasso covariates, Adj R2 = 0.623
Covariates: party7 + ideo + issue_scale_pre + policy14_imm_pre
N = 675
All covariates, Adj R2 = 0.547
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.152 (15.0% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo + issue_scale_pre + policy14_imm_pre
0.097 (9.6% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H4: Pro-immigration")
H4: Pro-immigration & 0.227 (0.076) & 0.072 (0.049) & 0.480 (0.221) & 0.097\\ 
(HuffPost) & [0.078, 0.377] & [-0.024, 0.167] & [0.045, 0.915] & ($d$=0.096)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 1", hypothesis = "Issue Opinions H4")
> 
> 
> ########################################################
> ### Issue RQ1: heterogeneous treatment effects
> ########################################################
> 
> # H1
> heterogeneous_effect(dv = "issue_scale", dv_pre = "issue_scale_pre",
+                      moderator = "party7", trt = "FoxNews")
Pre-treatment DV, Adj R2 = 0.826
N = 552
Lasso covariates, Adj R2 = 0.841
Covariates: party7 + ideo + issue_scale_pre
N = 542
All covariates, Adj R2 = 0.843
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 384
W3_PATA306_treatment_w3FoxNews:party7_c 
                                 "n.s." 
> heterogeneous_effect(dv = "issue_scale", dv_pre = "issue_scale_pre",
+                      moderator = "ideo", trt = "FoxNews")
Pre-treatment DV, Adj R2 = 0.826
N = 552
Lasso covariates, Adj R2 = 0.841
Covariates: party7 + ideo + issue_scale_pre
N = 542
All covariates, Adj R2 = 0.843
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 384
W3_PATA306_treatment_w3FoxNews:ideo_c 
                               "n.s." 
> # H2
> heterogeneous_effect(dv = "issue_scale", dv_pre = "issue_scale_pre",
+                      moderator = "party7", trt = "HuffPost")
Pre-treatment DV, Adj R2 = 0.813
N = 560
Lasso covariates, Adj R2 = 0.831
Covariates: party7 + ideo + issue_scale_pre
N = 544
All covariates, Adj R2 = 0.843
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 383
W3_PATA306_treatment_w3HuffPost:party7_c 
                                  "n.s." 
> heterogeneous_effect(dv = "issue_scale", dv_pre = "issue_scale_pre",
+                      moderator = "ideo", trt = "HuffPost")
Pre-treatment DV, Adj R2 = 0.813
N = 560
Lasso covariates, Adj R2 = 0.831
Covariates: party7 + ideo + issue_scale_pre
N = 544
All covariates, Adj R2 = 0.843
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 383
W3_PATA306_treatment_w3HuffPost:ideo_c 
                                "n.s." 
> # H3
> heterogeneous_effect(dv = "imm_issue_scale", dv_pre = "issue_scale_pre",
+                      moderator = "party7", trt = "FoxNews")
Pre-treatment DV, Adj R2 = 0.329
N = 696
Lasso covariates, Adj R2 = 0.458
Covariates: party7 + ideo + issue_scale_pre
N = 680
All covariates, Adj R2 = 0.504
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
W3_PATA306_treatment_w3FoxNews:party7_c 
                                 "n.s." 
> heterogeneous_effect(dv = "imm_issue_scale", dv_pre = "issue_scale_pre",
+                      moderator = "ideo", trt = "FoxNews")
Pre-treatment DV, Adj R2 = 0.329
N = 696
Lasso covariates, Adj R2 = 0.458
Covariates: party7 + ideo + issue_scale_pre
N = 680
All covariates, Adj R2 = 0.504
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
W3_PATA306_treatment_w3FoxNews:ideo_c 
                               "n.s." 
> # H4
> heterogeneous_effect(dv = "imm_issue_scale", dv_pre = "issue_scale_pre",
+                      moderator = "party7", trt = "HuffPost")
Pre-treatment DV, Adj R2 = 0.391
N = 696
Lasso covariates, Adj R2 = 0.507
Covariates: party7 + ideo + issue_scale_pre
N = 675
All covariates, Adj R2 = 0.547
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
W3_PATA306_treatment_w3HuffPost:party7_c 
                                  "n.s." 
> heterogeneous_effect(dv = "imm_issue_scale", dv_pre = "issue_scale_pre",
+                      moderator = "ideo", trt = "HuffPost")
Pre-treatment DV, Adj R2 = 0.391
N = 696
Lasso covariates, Adj R2 = 0.507
Covariates: party7 + ideo + issue_scale_pre
N = 675
All covariates, Adj R2 = 0.547
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
W3_PATA306_treatment_w3HuffPost:ideo_c 
                                "n.s." 
> 
> 
> ########################################################
> ### News H1: news browsing, FoxNews treatment, 1 week
> ########################################################
> 
> trt <- "FoxNews"
> dv <- "log_cons_1w"
> dv_pre <- "log_cons_pre"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                Estimate Std. Error  t value    Pr(>|t|)
W3_PATA306_treatment_w3FoxNews 0.4183192  0.1369785 3.053904 0.002385697
                                CI Lower CI Upper  DF
W3_PATA306_treatment_w3FoxNews 0.1491604 0.687478 475
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt, more_vars = "log_total_pre")
Estimate: 0.404
Std. Error: 0.079
CI Lower: 0.248
CI Upper: 0.560
Pre-treatment DV, Adj R2 = 0.650
N = 484
Lasso covariates, Adj R2 = 0.660
Covariates: diet_mean_pre + log_cons_pre
N = 484
All covariates, Adj R2 = 0.653
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 400
> compute_proportion_missing_covars(itt)
0.4% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.267 (18.0% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + diet_mean_pre + log_cons_pre
0.156 (10.5% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H1: Cons. news")
H1: Cons. news & 0.418 (0.137) & 0.404 (0.079) & 1.448 (0.283) & 0.156\\ 
(FoxNews) & [0.149, 0.687] & [0.248, 0.560] & [0.892, 2.005] & ($d$=0.105)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 1", hypothesis = "News Browsing H1")
> 
> 
> ########################################################
> ### News H2: news browsing, HuffPost treatment, 1 week
> ########################################################
> 
> trt <- "HuffPost"
> dv <- "log_lib_1w"
> dv_pre <- "log_lib_pre"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error   t value Pr(>|t|)
W3_PATA306_treatment_w3HuffPost 0.03802756  0.1474957 0.2578214 0.796655
                                 CI Lower  CI Upper  DF
W3_PATA306_treatment_w3HuffPost -0.251788 0.3278431 481
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt, more_vars = "log_total_pre")
Estimate: -0.149
Std. Error: 0.082
CI Lower: -0.309
CI Upper: 0.012
Pre-treatment DV, Adj R2 = 0.696
N = 491
Lasso covariates, Adj R2 = 0.696
Covariates: log_lib_pre
N = 491
All covariates, Adj R2 = 0.685
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 403
> compute_proportion_missing_covars(itt)
0.4% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.288 (17.9% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + log_lib_pre
0.156 (9.7% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H2: Lib. news")
H2: Lib. news & 0.038 (0.147) & -0.149 (0.082) & -0.446 (0.307) & 0.156\\ 
(HuffPost) & [-0.252, 0.328] & [-0.309, 0.012] & [-1.050, 0.158] & ($d$=0.097)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 1", hypothesis = "News Browsing H2")
> 
> 
> ########################################################
> ### News H1: news browsing, FoxNews treatment, 4 weeks
> ########################################################
> 
> trt <- "FoxNews"
> dv <- "log_cons_4w"
> dv_pre <- "log_cons_pre"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                Estimate Std. Error  t value    Pr(>|t|)
W3_PATA306_treatment_w3FoxNews 0.4539826  0.1666887 2.723535 0.006686474
                                CI Lower  CI Upper  DF
W3_PATA306_treatment_w3FoxNews 0.1264796 0.7814857 496
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt, more_vars = "log_total_pre")
Estimate: 0.501
Std. Error: 0.096
CI Lower: 0.311
CI Upper: 0.690
Pre-treatment DV, Adj R2 = 0.668
N = 501
Lasso covariates, Adj R2 = 0.668
Covariates: log_cons_pre
N = 501
All covariates, Adj R2 = 0.678
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 413
> compute_proportion_missing_covars(itt)
1.2% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.326 (17.6% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + log_cons_pre
0.185 (10.0% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H1: Cons. news")
H1: Cons. news & 0.454 (0.167) & 0.501 (0.096) & 1.769 (0.336) & 0.185\\ 
(FoxNews) & [0.126, 0.781] & [0.311, 0.690] & [1.109, 2.428] & ($d$=0.100)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "No", hypothesis = "News Browsing H1-4w")
> 
> 
> ########################################################
> ### News H2: news browsing, HuffPost treatment, 4 week
> ########################################################
> 
> trt <- "HuffPost"
> dv <- "log_lib_4w"
> dv_pre <- "log_lib_pre"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                    Estimate Std. Error     t value  Pr(>|t|)
W3_PATA306_treatment_w3HuffPost -0.009142109  0.1691702 -0.05404091 0.9569244
                                  CI Lower CI Upper  DF
W3_PATA306_treatment_w3HuffPost -0.3415222 0.323238 495
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt, more_vars = "log_total_pre")
Estimate: -0.246
Std. Error: 0.086
CI Lower: -0.415
CI Upper: -0.078
Pre-treatment DV, Adj R2 = 0.742
N = 501
Lasso covariates, Adj R2 = 0.742
Covariates: log_lib_pre
N = 501
All covariates, Adj R2 = 0.742
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 409
> compute_proportion_missing_covars(itt)
1.2% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.336 (17.6% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + log_lib_pre
0.174 (9.1% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H2: Lib. news")
H2: Lib. news & -0.009 (0.169) & -0.246 (0.086) & -0.899 (0.337) & 0.174\\ 
(HuffPost) & [-0.342, 0.323] & [-0.415, -0.078] & [-1.562, -0.236] & ($d$=0.091)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "No", hypothesis = "News Browsing H2-4w")
> 
> 
> ########################################################
> ### News H1: news browsing, FoxNews treatment, 6 weeks
> ########################################################
> 
> trt <- "FoxNews"
> dv <- "log_cons_6w"
> dv_pre <- "log_cons_pre"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                Estimate Std. Error  t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews 0.4540031  0.1727362 2.628302 0.0088451
                                CI Lower  CI Upper  DF
W3_PATA306_treatment_w3FoxNews 0.1146248 0.7933814 500
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt, more_vars = "log_total_pre")
Estimate: 0.510
Std. Error: 0.100
CI Lower: 0.313
CI Upper: 0.706
Pre-treatment DV, Adj R2 = 0.669
N = 502
Lasso covariates, Adj R2 = 0.669
Covariates: log_cons_pre
N = 502
All covariates, Adj R2 = 0.676
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 414
> compute_proportion_missing_covars(itt)
1.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.341 (17.5% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + log_cons_pre
0.196 (10.1% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H1: Cons. news")
H1: Cons. news & 0.454 (0.173) & 0.510 (0.100) & 1.792 (0.346) & 0.196\\ 
(FoxNews) & [0.115, 0.793] & [0.313, 0.706] & [1.113, 2.472] & ($d$=0.101)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "No", hypothesis = "News Browsing H1-6w")
> 
> 
> ########################################################
> ### News H2: news browsing, HuffPost treatment, 6 week
> ########################################################
> 
> trt <- "HuffPost"
> dv <- "log_lib_6w"
> dv_pre <- "log_lib_pre"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error   t value  Pr(>|t|)
W3_PATA306_treatment_w3HuffPost 0.04339021  0.1721304 0.2520775 0.8010851
                                  CI Lower  CI Upper  DF
W3_PATA306_treatment_w3HuffPost -0.2948011 0.3815816 498
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt, more_vars = "log_total_pre")
Estimate: -0.184
Std. Error: 0.092
CI Lower: -0.365
CI Upper: -0.003
Pre-treatment DV, Adj R2 = 0.714
N = 503
Lasso covariates, Adj R2 = 0.714
Covariates: log_lib_pre
N = 503
All covariates, Adj R2 = 0.713
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 411
> compute_proportion_missing_covars(itt)
1.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.345 (17.6% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + log_lib_pre
0.187 (9.5% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H2: Lib. news")
H2: Lib. news & 0.043 (0.172) & -0.184 (0.092) & -0.736 (0.352) & 0.187\\ 
(HuffPost) & [-0.295, 0.382] & [-0.365, -0.003] & [-1.429, -0.044] & ($d$=0.095)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "No", hypothesis = "News Browsing H2-6w")
> 
> 
> ########################################################
> ### News RQ1: heterogeneous treatment effects by party ID / ideology
> ########################################################
> 
> # H1
> heterogeneous_effect(dv = "log_cons_1w", dv_pre = "log_cons_pre",
+                      moderator = "party7", trt = "FoxNews")
Pre-treatment DV, Adj R2 = 0.650
N = 484
Lasso covariates, Adj R2 = 0.660
Covariates: diet_mean_pre + log_cons_pre
N = 484
All covariates, Adj R2 = 0.653
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 400
W3_PATA306_treatment_w3FoxNews:party7_c 
                                 "n.s." 
> heterogeneous_effect(dv = "log_cons_1w", dv_pre = "log_cons_pre",
+                      moderator = "ideo", trt = "FoxNews")
Pre-treatment DV, Adj R2 = 0.650
N = 484
Lasso covariates, Adj R2 = 0.660
Covariates: diet_mean_pre + log_cons_pre
N = 484
All covariates, Adj R2 = 0.653
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 400
W3_PATA306_treatment_w3FoxNews:ideo_c 
                               "n.s." 
> # H2
> heterogeneous_effect(dv = "log_lib_1w", dv_pre = "log_lib_pre",
+                      moderator = "party7", trt = "HuffPost")
Pre-treatment DV, Adj R2 = 0.696
N = 491
Lasso covariates, Adj R2 = 0.696
Covariates: log_lib_pre
N = 491
All covariates, Adj R2 = 0.685
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 403
W3_PATA306_treatment_w3HuffPost:party7_c 
                                  "n.s." 
> heterogeneous_effect(dv = "log_lib_1w", dv_pre = "log_lib_pre",
+                      moderator = "ideo", trt = "HuffPost")
Pre-treatment DV, Adj R2 = 0.696
N = 491
Lasso covariates, Adj R2 = 0.696
Covariates: log_lib_pre
N = 491
All covariates, Adj R2 = 0.685
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 403
W3_PATA306_treatment_w3HuffPost:ideo_c 
                                "n.s." 
> 
> ########################################################
> ### News RQ2: heterogeneous treatment effects by pre-treatment news consumption
> ########################################################
> 
> # H1
> heterogeneous_effect(dv = "log_cons_1w", dv_pre = "log_hp_pre",
+                      moderator = "log_fn_pre", trt = "FoxNews")
Pre-treatment DV, Adj R2 = 0.015
N = 484
Lasso covariates, Adj R2 = 0.507
Covariates: ideo + log_news_pre + diet_mean_pre
N = 477
All covariates, Adj R2 = 0.472
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 400
W3_PATA306_treatment_w3FoxNews:log_fn_pre_c 
                                     "n.s." 
> # H2
> heterogeneous_effect(dv = "log_lib_1w", dv_pre = "log_fn_pre",
+                      moderator = "log_hp_pre", trt = "HuffPost")
Pre-treatment DV, Adj R2 = 0.020
N = 491
Lasso covariates, Adj R2 = 0.621
Covariates: log_news_pre + diet_mean_pre
N = 491
All covariates, Adj R2 = 0.609
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 403
W3_PATA306_treatment_w3HuffPost:log_hp_pre_c 
                                      "n.s." 
> 
> 
> ########################################################
> ### Twitter H1: conservative link shares
> ########################################################
> 
> # creating Twitter variables
> svy$log_cons_links <- log(svy$cons_links+1)
> svy$log_cons_links_pre <- log(svy$cons_links_pre+1)
> svy$log_total_links_pre <- log(svy$total_links_pre+1)
> 
> trt <- "FoxNews"
> dv <- "log_cons_links"
> dv_pre <- "log_cons_links_pre"
> D <- "comp_fn"
> 
> # using chrome vs others as blocks here
> svy$chrome <- ifelse(svy$W3_Browser_treatment_w3=="Chrome", 1, 0)
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = chrome, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                Estimate Std. Error   t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews -0.216833  0.1753889 -1.236298 0.2190053
                                 CI Lower  CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.5644482 0.1307822 109
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt, blocks="chrome", more_vars = "log_total_links_pre")
Estimate: 0.019
Std. Error: 0.086
CI Lower: -0.151
CI Upper: 0.190
Pre-treatment DV, Adj R2 = 0.801
N = 113
Lasso covariates, Adj R2 = 0.801
Covariates: log_cons_links_pre
N = 113
All covariates, Adj R2 = 0.710
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 70
> compute_proportion_missing_covars(itt)
0.0% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.339 (37.4% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ chrome + log_cons_links_pre
0.144 (15.9% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H1: Tweets w/cons. links")
H1: Tweets w/cons. links & -0.217 (0.175) & 0.019 (0.086) & 0.293 (0.496) & 0.144\\ 
(FoxNews) & [-0.564, 0.131] & [-0.151, 0.190] & [-0.697, 1.282] & ($d$=0.159)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 1", hypothesis = "Social Media H1")
> 
> 
> 
> ########################################################
> ### Twitter H2: liberal link shares
> ########################################################
> 
> # creating Twitter variables
> svy$log_lib_links <- log(svy$lib_links+1)
> svy$log_lib_links_pre <- log(svy$lib_links_pre+1)
> svy$log_total_links_pre <- log(svy$total_links_pre+1)
> 
> trt <- "HuffPost"
> dv <- "log_lib_links"
> dv_pre <- "log_lib_links_pre"
> D <- "comp_hp"
> 
> # using chrome vs others as blocks here
> svy$chrome <- ifelse(svy$W3_Browser_treatment_w3=="Chrome", 1, 0)
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = chrome, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error    t value Pr(>|t|)
W3_PATA306_treatment_w3HuffPost 0.01282195  0.1905248 0.06729803 0.946447
                                  CI Lower  CI Upper  DF
W3_PATA306_treatment_w3HuffPost -0.3640816 0.3897255 131
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt, blocks="chrome", more_vars="log_total_links_pre")
Estimate: 0.059
Std. Error: 0.068
CI Lower: -0.076
CI Upper: 0.194
Pre-treatment DV, Adj R2 = 0.862
N = 135
Lasso covariates, Adj R2 = 0.862
Covariates: log_lib_links_pre
N = 135
All covariates, Adj R2 = 0.854
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 89
> compute_proportion_missing_covars(itt)
0.0% missing
> 
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt) # error with LATE power
MDE without covariate adjustment:
0.353 (34.2% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ chrome + log_lib_links_pre
0.178 (17.3% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H2: tweets w/lib. links")
H2: tweets w/lib. links & 0.013 (0.191) & 0.059 (0.068) & 0.473 (0.293) & 0.178\\ 
(HuffPost) & [-0.364, 0.390] & [-0.076, 0.194] & [-0.108, 1.054] & ($d$=0.173)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 1", hypothesis = "Social Media H2")
> 
> 
> ########################################################
> ### Twitter H3: follow conservative news sources
> ########################################################
> 
> # creating Twitter variables
> svy$log_follows_cons_media <- log(svy$follows_cons_media+1)
> svy$log_follows_elites <- log(svy$follows_elites+1)
> 
> trt <- "FoxNews"
> dv <- "log_follows_cons_media"
> D <- "comp_fn"
> 
> # using chrome vs others as blocks here
> svy$chrome <- ifelse(svy$W3_Browser_treatment_w3=="Chrome", 1, 0)
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = chrome, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error    t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews -0.06320088 0.08414988 -0.7510512 0.4534136
                                 CI Lower  CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.2290316 0.1026298 223
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt, blocks="chrome", more_vars = "log_follows_elites")
Estimate: -0.064
Std. Error: 0.058
CI Lower: -0.178
CI Upper: 0.049
Lasso covariates, Adj R2 = 0.571
Covariates: party7 + agesq + ideo + freq_net + diet_mean_pre + log_follows_elites
N = 218
All covariates, Adj R2 = 0.407
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 141
> compute_proportion_missing_covars(itt)
4.3% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.168 (26.4% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ chrome + party7 + agesq + ideo + freq_net + diet_mean_pre + log_follows_elites
0.115 (18.0% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H3: follow cons. media")
H3: follow cons. media & -0.063 (0.084) & -0.064 (0.058) & -0.405 (0.347) & 0.115\\ 
(FoxNews) & [-0.229, 0.103] & [-0.178, 0.049] & [-1.092, 0.282] & ($d$=0.180)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 1", hypothesis = "Social Media H3")
> 
> 
> ########################################################
> ### Twitter H4: follow liberal news sources
> ########################################################
> 
> # creating Twitter variables
> svy$log_follows_lib_media <- log(svy$follows_lib_media+1)
> svy$log_follows_elites <- log(svy$follows_elites+1)
> 
> trt <- "HuffPost"
> dv <- "log_follows_lib_media"
> D <- "comp_hp"
> 
> # using chrome vs others as blocks here
> svy$chrome <- ifelse(svy$W3_Browser_treatment_w3=="Chrome", 1, 0)
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = chrome, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error  t value   Pr(>|t|)
W3_PATA306_treatment_w3HuffPost 0.2123291  0.1106763 1.918469 0.05625811
                                    CI Lower  CI Upper  DF
W3_PATA306_treatment_w3HuffPost -0.005710669 0.4303689 236
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt, blocks="chrome", more_vars = "log_follows_elites")
Estimate: 0.020
Std. Error: 0.067
CI Lower: -0.113
CI Upper: 0.152
Lasso covariates, Adj R2 = 0.685
Covariates: party7 + ideo + diet_mean_pre + log_follows_elites
N = 231
All covariates, Adj R2 = 0.129
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 154
> compute_proportion_missing_covars(itt)
2.9% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.224 (25.6% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ chrome + party7 + ideo + diet_mean_pre + log_follows_elites
0.131 (14.9% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H4: follow lib. media")
H4: follow lib. media & 0.212 (0.111) & 0.020 (0.067) & -0.322 (0.314) & 0.131\\ 
(HuffPost) & [-0.006, 0.430] & [-0.113, 0.152] & [-0.943, 0.300] & ($d$=0.149)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 1", hypothesis = "Social Media H4")
> 
> 
> ########################################################
> ### Affective H1a: Democrats, HuffPost treatment
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> svy$W4_PATA450a_num <- as.numeric(svy$W4_PATA450a)
> svy$W2_PATA2_3_Dem_num <- as.numeric(svy$W2_PATA2_3_Dem)
> 
> trt <- "HuffPost"
> dv <- "W4_PATA450a_num" # FT Democrats
> dv_pre <- "W2_PATA2_3_Dem_num"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                Estimate Std. Error  t value  Pr(>|t|)
W3_PATA306_treatment_w3HuffPost 3.505396   2.659986 1.317825 0.1880072
                                 CI Lower CI Upper  DF
W3_PATA306_treatment_w3HuffPost -1.717403 8.728196 678
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: -0.521
Std. Error: 1.032
CI Lower: -2.547
CI Upper: 1.506
Pre-treatment DV, Adj R2 = 0.844
N = 687
Lasso covariates, Adj R2 = 0.853
Covariates: party7 + W2_PATA2_3_Dem_num
N = 684
All covariates, Adj R2 = 0.862
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 454
> compute_proportion_missing_covars(itt)
0.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
5.300 (15.1% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + W2_PATA2_3_Dem_num
2.033 (5.8% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H1a: Dem. thermometer")
H1a: Dem. thermometer & 3.505 (2.660) & -0.521 (1.032) & -1.379 (4.536) & 2.033\\ 
(HuffPost) & [-1.717, 8.728] & [-2.547, 1.506] & [-10.293, 7.535] & ($d$=0.058)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 1", hypothesis = "Affective Polarization H1a")
> 
> 
> ########################################################
> ### Affective H1b: Republicans, HuffPost treatment
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> svy$W4_PATA450b_num <- as.numeric(svy$W4_PATA450b)
> svy$W2_PATA2_3_Rep_num <- as.numeric(svy$W2_PATA2_3_Rep)
> 
> trt <- "HuffPost"
> dv <- "W4_PATA450b_num" # FT Republicans
> dv_pre <- "W2_PATA2_3_Rep_num"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error   t value   Pr(>|t|)
W3_PATA306_treatment_w3HuffPost -4.420416   2.641601 -1.673385 0.09471274
                                 CI Lower  CI Upper  DF
W3_PATA306_treatment_w3HuffPost -9.607117 0.7662855 678
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: 2.727
Std. Error: 1.111
CI Lower: 0.545
CI Upper: 4.909
Pre-treatment DV, Adj R2 = 0.807
N = 688
Lasso covariates, Adj R2 = 0.837
Covariates: party7 + ideo + W2_PATA2_3_Rep_num
N = 668
All covariates, Adj R2 = 0.848
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 454
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
5.284 (15.1% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo + W2_PATA2_3_Rep_num
2.130 (6.1% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H1b: Rep. thermometer")
H1b: Rep. thermometer & -4.420 (2.642) & 2.727 (1.111) & 11.925 (4.826) & 2.130\\ 
(HuffPost) & [-9.607, 0.766] & [0.545, 4.909] & [2.440, 21.410] & ($d$=0.061)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 1", hypothesis = "Affective Polarization H1b")
> 
> 
> ########################################################
> ### Affective H1c: Trump supporters, HuffPost treatment
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> svy$W4_PATA450e_num <- as.numeric(svy$W4_PATA450e)
> svy$W2_PATA2_6_num <- as.numeric(svy$W2_PATA2_6)
> 
> trt <- "HuffPost"
> dv <- "W4_PATA450e_num" # Trump social distance
> dv_pre <- "W2_PATA2_6_num"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error  t value   Pr(>|t|)
W3_PATA306_treatment_w3HuffPost 0.3575948  0.1687151 2.119518 0.03440629
                                  CI Lower  CI Upper  DF
W3_PATA306_treatment_w3HuffPost 0.02633307 0.6888565 684
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: 0.073
Std. Error: 0.105
CI Lower: -0.133
CI Upper: 0.279
Pre-treatment DV, Adj R2 = 0.576
N = 667
Lasso covariates, Adj R2 = 0.660
Covariates: party7 + ideo + W2_PATA2_6_num
N = 649
All covariates, Adj R2 = 0.678
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 444
> compute_proportion_missing_covars(itt)
6.1% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.343 (15.0% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo + W2_PATA2_6_num
0.207 (9.1% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H1c: Trump distance")
H1c: Trump distance & 0.358 (0.169) & 0.073 (0.105) & 0.476 (0.450) & 0.207\\ 
(HuffPost) & [0.026, 0.689] & [-0.133, 0.279] & [-0.408, 1.361] & ($d$=0.091)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 1", hypothesis = "Affective Polarization H1c")
> 
> 
> ########################################################
> ### Affective H2a: Democrats, FoxNews treatment
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> svy$W4_PATA450a_num <- as.numeric(svy$W4_PATA450a)
> svy$W2_PATA2_3_Dem_num <- as.numeric(svy$W2_PATA2_3_Dem)
> 
> trt <- "FoxNews"
> dv <- "W4_PATA450a_num" # FT Democrats
> dv_pre <- "W2_PATA2_3_Dem_num"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                               Estimate Std. Error   t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews -1.13235   2.687419 -0.421352 0.6736318
                                CI Lower CI Upper  DF
W3_PATA306_treatment_w3FoxNews -6.409028 4.144329 677
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: -0.531
Std. Error: 1.071
CI Lower: -2.633
CI Upper: 1.571
Pre-treatment DV, Adj R2 = 0.832
N = 688
Lasso covariates, Adj R2 = 0.840
Covariates: party7 + W2_PATA2_3_Dem_num
N = 687
All covariates, Adj R2 = 0.842
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 459
> compute_proportion_missing_covars(itt)
0.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
5.304 (15.1% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + W2_PATA2_3_Dem_num
2.029 (5.8% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H2a: Dem. thermometer")
H2a: Dem. thermometer & -1.132 (2.687) & -0.531 (1.071) & -6.797 (4.598) & 2.029\\ 
(FoxNews) & [-6.409, 4.144] & [-2.633, 1.571] & [-15.831, 2.238] & ($d$=0.058)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 1", hypothesis = "Affective Polarization H2a")
> 
> 
> ########################################################
> ### Affective H2b: Republicans, FoxNews treatment
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> svy$W4_PATA450b_num <- as.numeric(svy$W4_PATA450b)
> svy$W2_PATA2_3_Rep_num <- as.numeric(svy$W2_PATA2_3_Rep)
> 
> trt <- "FoxNews"
> dv <- "W4_PATA450b_num" # FT Republicans
> dv_pre <- "W2_PATA2_3_Rep_num"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error    t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews -0.3549452   2.686819 -0.1321061 0.8949396
                                CI Lower CI Upper  DF
W3_PATA306_treatment_w3FoxNews -5.630445 4.920555 677
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: 1.361
Std. Error: 1.042
CI Lower: -0.684
CI Upper: 3.407
Pre-treatment DV, Adj R2 = 0.829
N = 689
Lasso covariates, Adj R2 = 0.849
Covariates: party7 + ideo + W2_PATA2_3_Rep_num
N = 675
All covariates, Adj R2 = 0.853
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 460
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
5.288 (15.1% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo + W2_PATA2_3_Rep_num
2.119 (6.1% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H2b: Rep. thermometer")
H2b: Rep. thermometer & -0.355 (2.687) & 1.361 (1.042) & 4.798 (4.612) & 2.119\\ 
(FoxNews) & [-5.630, 4.921] & [-0.684, 3.407] & [-4.266, 13.862] & ($d$=0.061)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 1", hypothesis = "Affective Polarization H2b")
> 
> 
> ########################################################
> ### Affective H2c: Trump supporters, FoxNews treatment
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> svy$W4_PATA450e_num <- as.numeric(svy$W4_PATA450e)
> svy$W2_PATA2_6_Rep_num <- as.numeric(svy$W2_PATA2_6)
> 
> trt <- "FoxNews"
> dv <- "W4_PATA450e_num" # Trump social distance
> dv_pre <- "W2_PATA2_6_Rep_num"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error    t value Pr(>|t|)
W3_PATA306_treatment_w3FoxNews -0.04756833  0.1755131 -0.2710244 0.786454
                                 CI Lower  CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.3921774 0.2970408 684
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: -0.019
Std. Error: 0.108
CI Lower: -0.231
CI Upper: 0.193
Pre-treatment DV, Adj R2 = 0.537
N = 669
Lasso covariates, Adj R2 = 0.653
Covariates: party7 + ideo + W2_PATA2_6_Rep_num
N = 655
All covariates, Adj R2 = 0.669
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 450
> compute_proportion_missing_covars(itt)
6.1% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.343 (15.0% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo + W2_PATA2_6_Rep_num
0.206 (9.0% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H2c: Trump distance")
H2c: Trump distance & -0.048 (0.176) & -0.019 (0.108) & -0.055 (0.455) & 0.206\\ 
(FoxNews) & [-0.392, 0.297] & [-0.231, 0.193] & [-0.949, 0.839] & ($d$=0.090)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 1", hypothesis = "Affective Polarization H2c")
> 
> 
> ########################################################
> ### Polarization RQ1: heterogeneous treatment effects by party ID / ideology
> ########################################################
> 
> # H1a
> heterogeneous_effect(dv = "W4_PATA450a", dv_pre = "W2_PATA2_3_Dem",
+                      moderator = "party7", trt = "HuffPost")
Pre-treatment DV, Adj R2 = 0.844
N = 687
Lasso covariates, Adj R2 = 0.853
Covariates: party7 + W2_PATA2_3_Dem
N = 684
All covariates, Adj R2 = 0.862
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 454
W3_PATA306_treatment_w3HuffPost:party7_c 
                                  "n.s." 
> heterogeneous_effect(dv = "W4_PATA450a", dv_pre = "W2_PATA2_3_Dem",
+                      moderator = "ideo", trt = "HuffPost")
Pre-treatment DV, Adj R2 = 0.844
N = 687
Lasso covariates, Adj R2 = 0.853
Covariates: party7 + W2_PATA2_3_Dem
N = 684
All covariates, Adj R2 = 0.862
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 454
W3_PATA306_treatment_w3HuffPost:ideo_c 
                                "n.s." 
> # H1b
> heterogeneous_effect(dv = "W4_PATA450b", dv_pre = "W2_PATA2_3_Rep",
+                      moderator = "party7", trt = "HuffPost")
Pre-treatment DV, Adj R2 = 0.807
N = 688
Lasso covariates, Adj R2 = 0.837
Covariates: party7 + ideo + W2_PATA2_3_Rep
N = 668
All covariates, Adj R2 = 0.848
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 454
W3_PATA306_treatment_w3HuffPost:party7_c 
                                  "n.s." 
> heterogeneous_effect(dv = "W4_PATA450b", dv_pre = "W2_PATA2_3_Rep",
+                      moderator = "ideo", trt = "HuffPost")
Pre-treatment DV, Adj R2 = 0.807
N = 688
Lasso covariates, Adj R2 = 0.837
Covariates: party7 + ideo + W2_PATA2_3_Rep
N = 668
All covariates, Adj R2 = 0.848
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 454
W3_PATA306_treatment_w3HuffPost:ideo_c 
                                "n.s." 
> 
> # H1c
> heterogeneous_effect(dv = "W4_PATA450e", dv_pre = "W2_PATA2_6",
+                      moderator = "party7", trt = "HuffPost")
Pre-treatment DV, Adj R2 = 0.576
N = 667
Lasso covariates, Adj R2 = 0.660
Covariates: party7 + ideo + W2_PATA2_6
N = 649
All covariates, Adj R2 = 0.678
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 444
W3_PATA306_treatment_w3HuffPost:party7_c 
                                     "+" 
> heterogeneous_effect(dv = "W4_PATA450e", dv_pre = "W2_PATA2_6",
+                      moderator = "ideo", trt = "HuffPost")
Pre-treatment DV, Adj R2 = 0.576
N = 667
Lasso covariates, Adj R2 = 0.660
Covariates: party7 + ideo + W2_PATA2_6
N = 649
All covariates, Adj R2 = 0.678
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 444
W3_PATA306_treatment_w3HuffPost:ideo_c 
                                "n.s." 
> 
> # H2a
> heterogeneous_effect(dv = "W4_PATA450a", dv_pre = "W2_PATA2_3_Dem",
+                      moderator = "party7", trt = "FoxNews")
Pre-treatment DV, Adj R2 = 0.832
N = 688
Lasso covariates, Adj R2 = 0.840
Covariates: party7 + W2_PATA2_3_Dem
N = 687
All covariates, Adj R2 = 0.842
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 459
W3_PATA306_treatment_w3FoxNews:party7_c 
                                 "n.s." 
> heterogeneous_effect(dv = "W4_PATA450a", dv_pre = "W2_PATA2_3_Dem",
+                      moderator = "ideo", trt = "FoxNews")
Pre-treatment DV, Adj R2 = 0.832
N = 688
Lasso covariates, Adj R2 = 0.840
Covariates: party7 + W2_PATA2_3_Dem
N = 687
All covariates, Adj R2 = 0.842
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 459
W3_PATA306_treatment_w3FoxNews:ideo_c 
                               "n.s." 
> # H2b
> heterogeneous_effect(dv = "W4_PATA450b", dv_pre = "W2_PATA2_3_Rep",
+                      moderator = "party7", trt = "FoxNews")
Pre-treatment DV, Adj R2 = 0.829
N = 689
Lasso covariates, Adj R2 = 0.849
Covariates: party7 + ideo + W2_PATA2_3_Rep
N = 675
All covariates, Adj R2 = 0.853
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 460
W3_PATA306_treatment_w3FoxNews:party7_c 
                                 "n.s." 
> heterogeneous_effect(dv = "W4_PATA450b", dv_pre = "W2_PATA2_3_Rep",
+                      moderator = "ideo", trt = "FoxNews")
Pre-treatment DV, Adj R2 = 0.829
N = 689
Lasso covariates, Adj R2 = 0.849
Covariates: party7 + ideo + W2_PATA2_3_Rep
N = 675
All covariates, Adj R2 = 0.853
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 460
W3_PATA306_treatment_w3FoxNews:ideo_c 
                               "n.s." 
> 
> # H2c
> heterogeneous_effect(dv = "W4_PATA450e", dv_pre = "W2_PATA2_6",
+                      moderator = "party7", trt = "FoxNews")
Pre-treatment DV, Adj R2 = 0.537
N = 669
Lasso covariates, Adj R2 = 0.653
Covariates: party7 + ideo + W2_PATA2_6
N = 655
All covariates, Adj R2 = 0.669
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 450
W3_PATA306_treatment_w3FoxNews:party7_c 
                                 "n.s." 
> heterogeneous_effect(dv = "W4_PATA450e", dv_pre = "W2_PATA2_6",
+                      moderator = "ideo", trt = "FoxNews")
Pre-treatment DV, Adj R2 = 0.537
N = 669
Lasso covariates, Adj R2 = 0.653
Covariates: party7 + ideo + W2_PATA2_6
N = 655
All covariates, Adj R2 = 0.669
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 450
W3_PATA306_treatment_w3FoxNews:ideo_c 
                               "n.s." 
> 
> 
> ########################################################
> ### Perceived H1a: FoxNews treatment
> ########################################################
> 
> trt <- "FoxNews"
> dv <- "ppol"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error  t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews 0.08633899 0.06065868 1.423358 0.1550912
                                  CI Lower  CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.03276182 0.2054398 680
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: 0.086
Std. Error: 0.061
CI Lower: -0.033
CI Upper: 0.205
All covariates, Adj R2 = 0.003
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 462
> compute_proportion_missing_covars(itt)
0.0% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt) 
MDE without covariate adjustment:
0.120 (15.1% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3
0.120 (15.1% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H1a: Perceived polarization")
H1a: Perceived polarization & 0.086 (0.061) & 0.086 (0.061) & 0.339 (0.254) & 0.120\\ 
(FoxNews) & [-0.033, 0.205] & [-0.033, 0.205] & [-0.161, 0.839] & ($d$=0.151)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 1", hypothesis = "Perceived Polarization H1a")
> 
> 
> ########################################################
> ### Perceived H1b: HuffPost treatment
> ########################################################
> 
> trt <- "HuffPost"
> dv <- "ppol" 
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error  t value  Pr(>|t|)
W3_PATA306_treatment_w3HuffPost 0.06812268 0.05979842 1.139205 0.2550186
                                   CI Lower  CI Upper  DF
W3_PATA306_treatment_w3HuffPost -0.04928905 0.1855344 680
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: 0.068
Std. Error: 0.060
CI Lower: -0.049
CI Upper: 0.186
All covariates, Adj R2 = 0.004
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 457
> compute_proportion_missing_covars(itt)
0.0% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.120 (15.1% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3
0.120 (15.1% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H1b: Perceived polarization")
H1b: Perceived polarization & 0.068 (0.060) & 0.068 (0.060) & 0.259 (0.265) & 0.120\\ 
(HuffPost) & [-0.049, 0.186] & [-0.049, 0.186] & [-0.261, 0.780] & ($d$=0.151)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 1", hypothesis = "Perceived Polarization H1b")
> 
> 
> ########################################################
> ### Perceived RQ1: heterogeneous treatment effects by party ID / ideology
> ########################################################
> 
> # H1a
> heterogeneous_effect(dv = "ppol", 
+                      moderator = "party7", trt = "FoxNews")
All covariates, Adj R2 = 0.003
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 462
W3_PATA306_treatment_w3FoxNews:party7_c 
                                 "n.s." 
> # H1b
> heterogeneous_effect(dv = "ppol", 
+                      moderator = "party7", trt = "HuffPost")
All covariates, Adj R2 = 0.004
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 457
W3_PATA306_treatment_w3HuffPost:party7_c 
                                  "n.s." 
> 
> 
> ########################################################
> ### Agenda H1: FoxNews treatment
> ########################################################
> 
> trt <- "FoxNews"
> dv <- "agenda_lean"
> dv_pre <- "agenda_lean_pre"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error   t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews 0.002736794 0.01566887 0.1746644 0.8613954
                                  CI Lower   CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.02802847 0.03350206 679
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: 0.006
Std. Error: 0.009
CI Lower: -0.011
CI Upper: 0.024
Pre-treatment DV, Adj R2 = 0.632
N = 691
Lasso covariates, Adj R2 = 0.695
Covariates: party7 + ideo + diet_mean_pre + agenda_lean_pre
N = 675
All covariates, Adj R2 = 0.713
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 459
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.031 (15.1% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo + diet_mean_pre + agenda_lean_pre
0.017 (8.3% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H1: Agenda setting")
H1: Agenda setting & 0.003 (0.016) & 0.006 (0.009) & 0.031 (0.036) & 0.017\\ 
(FoxNews) & [-0.028, 0.034] & [-0.011, 0.024] & [-0.040, 0.101] & ($d$=0.083)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 1", hypothesis = "Agenda Setting H1")
> 
> 
> ########################################################
> ### Agenda H2: HuffPost treatment
> ########################################################
> 
> trt <- "HuffPost"
> dv <- "agenda_lean"
> dv_pre <- "agenda_lean_pre"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error  t value  Pr(>|t|)
W3_PATA306_treatment_w3HuffPost 0.03330313 0.01554925 2.141784 0.0325655
                                   CI Lower   CI Upper  DF
W3_PATA306_treatment_w3HuffPost 0.002772825 0.06383343 680
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: 0.007
Std. Error: 0.009
CI Lower: -0.010
CI Upper: 0.025
Pre-treatment DV, Adj R2 = 0.660
N = 692
Lasso covariates, Adj R2 = 0.704
Covariates: party7 + ideo + diet_mean_pre + agenda_lean_pre
N = 671
All covariates, Adj R2 = 0.731
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 455
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.031 (15.1% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo + diet_mean_pre + agenda_lean_pre
0.017 (8.3% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace,  trt, pwr,
+               dv = "H2: Agenda setting")
H2: Agenda setting & 0.033 (0.016) & 0.007 (0.009) & 0.040 (0.037) & 0.017\\ 
(HuffPost) & [0.003, 0.064] & [-0.010, 0.025] & [-0.032, 0.113] & ($d$=0.083)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 1", hypothesis = "Agenda Setting H2")
> 
> 
> ########################################################
> ### Agenda RQ1: heterogeneous treatment effects by party ID / ideology
> ########################################################
> 
> # H1
> heterogeneous_effect(dv = "agenda_lean", dv_pre = "agenda_lean_pre",
+                      moderator = "party7", trt = "FoxNews")
Pre-treatment DV, Adj R2 = 0.632
N = 691
Lasso covariates, Adj R2 = 0.695
Covariates: party7 + ideo + diet_mean_pre + agenda_lean_pre
N = 675
All covariates, Adj R2 = 0.713
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 459
W3_PATA306_treatment_w3FoxNews:party7_c 
                                 "n.s." 
> heterogeneous_effect(dv = "agenda_lean", dv_pre = "agenda_lean_pre",
+                      moderator = "ideo", trt = "FoxNews")
Pre-treatment DV, Adj R2 = 0.632
N = 691
Lasso covariates, Adj R2 = 0.695
Covariates: party7 + ideo + diet_mean_pre + agenda_lean_pre
N = 675
All covariates, Adj R2 = 0.713
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 459
W3_PATA306_treatment_w3FoxNews:ideo_c 
                               "n.s." 
> 
> # H2
> heterogeneous_effect(dv = "agenda_lean", dv_pre = "agenda_lean_pre",
+                      moderator = "party7", trt = "HuffPost")
Pre-treatment DV, Adj R2 = 0.660
N = 692
Lasso covariates, Adj R2 = 0.704
Covariates: party7 + ideo + diet_mean_pre + agenda_lean_pre
N = 671
All covariates, Adj R2 = 0.731
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 455
W3_PATA306_treatment_w3HuffPost:party7_c 
                                  "n.s." 
> heterogeneous_effect(dv = "agenda_lean", dv_pre = "agenda_lean_pre",
+                      moderator = "ideo", trt = "HuffPost")
Pre-treatment DV, Adj R2 = 0.660
N = 692
Lasso covariates, Adj R2 = 0.704
Covariates: party7 + ideo + diet_mean_pre + agenda_lean_pre
N = 671
All covariates, Adj R2 = 0.731
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 455
W3_PATA306_treatment_w3HuffPost:ideo_c 
                                "n.s." 
> 
> ########################################################
> ### Agenda RQ2: heterogeneous treatment effects by pre-treatment habits
> ########################################################
> 
> # H1
> heterogeneous_effect(dv = "agenda_lean", dv_pre = "log_fn_pre",
+                      moderator = "ideo", trt = "FoxNews")
Pre-treatment DV, Adj R2 = 0.118
N = 531
Lasso covariates, Adj R2 = 0.541
Covariates: party7 + ideo + diet_mean_pre
N = 675
All covariates, Adj R2 = 0.576
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 459
W3_PATA306_treatment_w3FoxNews:ideo_c 
                               "n.s." 
> # H2
> heterogeneous_effect(dv = "agenda_lean", dv_pre = "log_hp_pre",
+                      moderator = "ideo", trt = "HuffPost")
Pre-treatment DV, Adj R2 = 0.035
N = 530
Lasso covariates, Adj R2 = 0.562
Covariates: party7 + ideo + diet_mean_pre
N = 671
All covariates, Adj R2 = 0.569
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 455
W3_PATA306_treatment_w3HuffPost:ideo_c 
                                "n.s." 
> 
> 
> ########################################################
> ### Approval H1a: President
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> svy$trump_approve_num <- as.numeric(svy$trump_approve)
> svy$trump_approve_pre_num <- as.numeric(svy$trump_approve_pre)
> 
> trt <- "FoxNews"
> dv <- "trump_approve_num"
> dv_pre <- "trump_approve_pre_num"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error    t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews 0.008873637  0.1350862 0.06568869 0.9476449
                                 CI Lower  CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.2563598 0.2741071 684
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: 0.038
Std. Error: 0.034
CI Lower: -0.029
CI Upper: 0.105
Pre-treatment DV, Adj R2 = 0.934
N = 696
Lasso covariates, Adj R2 = 0.937
Covariates: party7 + ideo + trump_approve_pre_num
N = 680
All covariates, Adj R2 = 0.948
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.266 (15.0% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo + trump_approve_pre_num
0.068 (3.9% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H1a: Pres. approval")
H1a: Pres. approval & 0.009 (0.135) & 0.038 (0.034) & 0.032 (0.147) & 0.068\\ 
(FoxNews) & [-0.256, 0.274] & [-0.029, 0.105] & [-0.258, 0.321] & ($d$=0.039)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 1", hypothesis = "Elite Approval H1a")
> 
> 
> ########################################################
> ### Approval H1b: Republicans in Congress [Congress control preference]
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> svy$cong_rep_approve_num <- as.numeric(svy$cong_rep_approve)
> svy$cong_rep_approve_pre_num <- as.numeric(svy$cong_rep_approve_pre)
> 
> trt <- "FoxNews"
> dv <- "cong_rep_approve_num"
> dv_pre <- "cong_rep_approve_pre_num"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                    Estimate Std. Error     t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews -0.0008617931 0.03595016 -0.02397188 0.9808816
                                  CI Lower  CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.07144048 0.0697169 726
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: 0.001
Std. Error: 0.013
CI Lower: -0.025
CI Upper: 0.028
Pre-treatment DV, Adj R2 = 0.854
N = 738
Lasso covariates, Adj R2 = 0.866
Covariates: party7 + ideo + cong_rep_approve_pre_num
N = 722
All covariates, Adj R2 = 0.932
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.071 (14.6% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo + cong_rep_approve_pre_num
0.028 (5.7% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H1b: Rep. Cong. pref.")
H1b: Rep. Cong. pref. & -0.001 (0.036) & 0.001 (0.013) & 0.012 (0.040) & 0.028\\ 
(FoxNews) & [-0.071, 0.070] & [-0.025, 0.028] & [-0.066, 0.090] & ($d$=0.057)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 1", hypothesis = "Elite Approval H1b")
> 
> 
> ########################################################
> ### Approval H1c: Democrats in Congress [Congress control preference]
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> svy$cong_dem_approve_num <- as.numeric(svy$cong_dem_approve)
> svy$cong_dem_approve_pre_num <- as.numeric(svy$cong_dem_approve_pre)
> 
> trt <- "FoxNews"
> dv <- "cong_dem_approve_num"
> dv_pre <- "cong_dem_approve_pre_num"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error   t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews 0.00511828 0.03656007 0.1399964 0.8887016
                                  CI Lower   CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.06665781 0.07689436 726
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: 0.007
Std. Error: 0.020
CI Lower: -0.031
CI Upper: 0.046
Pre-treatment DV, Adj R2 = 0.713
N = 738
Lasso covariates, Adj R2 = 0.726
Covariates: party7 + ideo + cong_dem_approve_pre_num
N = 722
All covariates, Adj R2 = 0.843
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.073 (14.6% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo + cong_dem_approve_pre_num
0.039 (7.9% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H1c: Dem. Cong. pref.")
H1c: Dem. Cong. pref. & 0.005 (0.037) & 0.007 (0.020) & 0.002 (0.065) & 0.039\\ 
(FoxNews) & [-0.067, 0.077] & [-0.031, 0.046] & [-0.125, 0.129] & ($d$=0.079)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 1", hypothesis = "Elite Approval H1c")
> 
> 
> ########################################################
> ### Approval H2a: President
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> svy$trump_approve_num <- as.numeric(svy$trump_approve)
> svy$trump_approve_pre_num <- as.numeric(svy$trump_approve_pre)
> 
> trt <- "HuffPost"
> dv <- "trump_approve_num"
> dv_pre <- "trump_approve_pre_num"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error   t value   Pr(>|t|)
W3_PATA306_treatment_w3HuffPost -0.2217973  0.1319843 -1.680482 0.09332009
                                  CI Lower   CI Upper  DF
W3_PATA306_treatment_w3HuffPost -0.4809403 0.03734574 684
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: 0.044
Std. Error: 0.035
CI Lower: -0.025
CI Upper: 0.114
Pre-treatment DV, Adj R2 = 0.925
N = 696
Lasso covariates, Adj R2 = 0.932
Covariates: party7 + ideo + trump_approve_pre_num
N = 675
All covariates, Adj R2 = 0.934
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.266 (15.0% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo + trump_approve_pre_num
0.069 (3.9% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H2a: Pres. approval")
H2a: Pres. approval & -0.222 (0.132) & 0.044 (0.035) & 0.077 (0.156) & 0.069\\ 
(HuffPost) & [-0.481, 0.037] & [-0.025, 0.114] & [-0.229, 0.383] & ($d$=0.039)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 1", hypothesis = "Elite Approval H2a")
> 
> 
> ########################################################
> ### Approval H2b: Republicans in Congress [Congress control preference]
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> svy$cong_rep_approve_num <- as.numeric(svy$cong_rep_approve)
> svy$cong_rep_approve_pre_num <- as.numeric(svy$cong_rep_approve_pre)
> 
> trt <- "HuffPost"
> dv <- "cong_rep_approve_num"
> dv_pre <- "cong_rep_approve_pre_num"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error   t value  Pr(>|t|)
W3_PATA306_treatment_w3HuffPost -0.0543093 0.03508597 -1.547892 0.1220846
                                  CI Lower   CI Upper  DF
W3_PATA306_treatment_w3HuffPost -0.1231915 0.01457293 725
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: 0.002
Std. Error: 0.015
CI Lower: -0.027
CI Upper: 0.032
Pre-treatment DV, Adj R2 = 0.829
N = 737
Lasso covariates, Adj R2 = 0.837
Covariates: party7 + ideo + cong_rep_approve_pre_num
N = 715
All covariates, Adj R2 = 0.886
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.071 (14.6% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo + cong_rep_approve_pre_num
0.028 (5.8% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H2b: Rep. Cong. pref.")
H2b: Rep. Cong. pref. & -0.054 (0.035) & 0.002 (0.015) & 0.028 (0.054) & 0.028\\ 
(HuffPost) & [-0.123, 0.015] & [-0.027, 0.032] & [-0.078, 0.134] & ($d$=0.058)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 1", hypothesis = "Elite Approval H2b")
> 
> 
> ########################################################
> ### Approval H2c: Democrats in Congress [Congress control preference]
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> svy$cong_dem_approve_num <- as.numeric(svy$cong_dem_approve)
> svy$cong_dem_approve_pre_num <- as.numeric(svy$cong_dem_approve_pre)
> 
> trt <- "HuffPost"
> dv <- "cong_dem_approve"
> dv_pre <- "cong_dem_approve_pre"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error t value  Pr(>|t|)
W3_PATA306_treatment_w3HuffPost 0.05089763 0.03642309  1.3974 0.1627208
                                  CI Lower CI Upper  DF
W3_PATA306_treatment_w3HuffPost -0.0206097 0.122405 725
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: -0.003
Std. Error: 0.020
CI Lower: -0.042
CI Upper: 0.037
Pre-treatment DV, Adj R2 = 0.697
N = 737
Lasso covariates, Adj R2 = 0.718
Covariates: party7 + ideo + cong_dem_approve_pre
N = 715
All covariates, Adj R2 = 0.815
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.073 (14.6% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo + cong_dem_approve_pre
0.039 (7.9% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H2c: Dem. Cong. pref.")
H2c: Dem. Cong. pref. & 0.051 (0.036) & -0.003 (0.020) & 0.015 (0.070) & 0.039\\ 
(HuffPost) & [-0.021, 0.122] & [-0.042, 0.037] & [-0.122, 0.152] & ($d$=0.079)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 1", hypothesis = "Elite Approval H2c")
> 
> 
> ########################################################
> ### Approval RQ1: heterogeneous treatment effects by party ID / ideology
> ########################################################
> 
> # H1a
> heterogeneous_effect(dv = "trump_approve", dv_pre = "trump_approve_pre",
+                      moderator = "party7", trt = "FoxNews")
Pre-treatment DV, Adj R2 = 0.934
N = 696
Lasso covariates, Adj R2 = 0.937
Covariates: party7 + ideo + trump_approve_pre
N = 680
All covariates, Adj R2 = 0.948
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
W3_PATA306_treatment_w3FoxNews:party7_c 
                                 "n.s." 
> heterogeneous_effect(dv = "trump_approve", dv_pre = "trump_approve_pre",
+                      moderator = "ideo", trt = "FoxNews")
Pre-treatment DV, Adj R2 = 0.934
N = 696
Lasso covariates, Adj R2 = 0.937
Covariates: party7 + ideo + trump_approve_pre
N = 680
All covariates, Adj R2 = 0.948
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
W3_PATA306_treatment_w3FoxNews:ideo_c 
                               "n.s." 
> # H1b
> heterogeneous_effect(dv = "cong_rep_approve", 
+                      dv_pre = "cong_rep_approve_pre",
+                      moderator = "party7", trt = "FoxNews")
Pre-treatment DV, Adj R2 = 0.854
N = 738
Lasso covariates, Adj R2 = 0.866
Covariates: party7 + ideo + cong_rep_approve_pre
N = 722
All covariates, Adj R2 = 0.932
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
W3_PATA306_treatment_w3FoxNews:party7_c 
                                 "n.s." 
> heterogeneous_effect(dv = "cong_rep_approve", 
+                      dv_pre = "cong_rep_approve_pre",
+                      moderator = "ideo", trt = "FoxNews")
Pre-treatment DV, Adj R2 = 0.854
N = 738
Lasso covariates, Adj R2 = 0.866
Covariates: party7 + ideo + cong_rep_approve_pre
N = 722
All covariates, Adj R2 = 0.932
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
W3_PATA306_treatment_w3FoxNews:ideo_c 
                               "n.s." 
> # H1c
> heterogeneous_effect(dv = "cong_dem_approve", 
+                      dv_pre = "cong_dem_approve_pre",
+                      moderator = "party7", trt = "FoxNews")
Pre-treatment DV, Adj R2 = 0.713
N = 738
Lasso covariates, Adj R2 = 0.726
Covariates: party7 + ideo + cong_dem_approve_pre
N = 722
All covariates, Adj R2 = 0.843
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
W3_PATA306_treatment_w3FoxNews:party7_c 
                                 "n.s." 
> heterogeneous_effect(dv = "cong_dem_approve", 
+                      dv_pre = "cong_dem_approve_pre",
+                      moderator = "ideo", trt = "FoxNews")
Pre-treatment DV, Adj R2 = 0.713
N = 738
Lasso covariates, Adj R2 = 0.726
Covariates: party7 + ideo + cong_dem_approve_pre
N = 722
All covariates, Adj R2 = 0.843
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
W3_PATA306_treatment_w3FoxNews:ideo_c 
                               "n.s." 
> 
> # H2a
> heterogeneous_effect(dv = "trump_approve", dv_pre = "trump_approve_pre",
+                      moderator = "party7", trt = "HuffPost")
Pre-treatment DV, Adj R2 = 0.925
N = 696
Lasso covariates, Adj R2 = 0.932
Covariates: party7 + ideo + trump_approve_pre
N = 675
All covariates, Adj R2 = 0.934
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
W3_PATA306_treatment_w3HuffPost:party7_c 
                                  "n.s." 
> heterogeneous_effect(dv = "trump_approve", dv_pre = "trump_approve_pre",
+                      moderator = "ideo", trt = "HuffPost")
Pre-treatment DV, Adj R2 = 0.925
N = 696
Lasso covariates, Adj R2 = 0.932
Covariates: party7 + ideo + trump_approve_pre
N = 675
All covariates, Adj R2 = 0.934
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
W3_PATA306_treatment_w3HuffPost:ideo_c 
                                "n.s." 
> # H2b
> heterogeneous_effect(dv = "cong_rep_approve", 
+                      dv_pre = "cong_rep_approve_pre",
+                      moderator = "party7", trt = "HuffPost")
Pre-treatment DV, Adj R2 = 0.829
N = 737
Lasso covariates, Adj R2 = 0.837
Covariates: party7 + ideo + cong_rep_approve_pre
N = 715
All covariates, Adj R2 = 0.886
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
W3_PATA306_treatment_w3HuffPost:party7_c 
                                  "n.s." 
> heterogeneous_effect(dv = "cong_rep_approve", 
+                      dv_pre = "cong_rep_approve_pre",
+                      moderator = "ideo", trt = "HuffPost")
Pre-treatment DV, Adj R2 = 0.829
N = 737
Lasso covariates, Adj R2 = 0.837
Covariates: party7 + ideo + cong_rep_approve_pre
N = 715
All covariates, Adj R2 = 0.886
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
W3_PATA306_treatment_w3HuffPost:ideo_c 
                                "n.s." 
> # H2c
> heterogeneous_effect(dv = "cong_dem_approve", 
+                      dv_pre = "cong_dem_approve_pre",
+                      moderator = "party7", trt = "HuffPost")
Pre-treatment DV, Adj R2 = 0.697
N = 737
Lasso covariates, Adj R2 = 0.718
Covariates: party7 + ideo + cong_dem_approve_pre
N = 715
All covariates, Adj R2 = 0.815
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
W3_PATA306_treatment_w3HuffPost:party7_c 
                                  "n.s." 
> heterogeneous_effect(dv = "cong_dem_approve", 
+                      dv_pre = "cong_dem_approve_pre",
+                      moderator = "ideo", trt = "HuffPost")
Pre-treatment DV, Adj R2 = 0.697
N = 737
Lasso covariates, Adj R2 = 0.718
Covariates: party7 + ideo + cong_dem_approve_pre
N = 715
All covariates, Adj R2 = 0.815
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
W3_PATA306_treatment_w3HuffPost:ideo_c 
                                   "-" 
> 
> ########################################################
> ### Turnout RQ1a: Fox News
> ########################################################
> 
> trt <- "FoxNews"
> dv <- "vote_after"
> dv_pre <- "vote_pre"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error   t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews -0.03638737 0.02777612 -1.310024 0.1906022
                                  CI Lower   CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.09091847 0.01814373 726
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: -0.031
Std. Error: 0.024
CI Lower: -0.079
CI Upper: 0.017
Pre-treatment DV, Adj R2 = 0.233
N = 738
Lasso covariates, Adj R2 = 0.233
Covariates: vote_pre
N = 738
All covariates, Adj R2 = 0.290
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
> compute_proportion_missing_covars(itt)
0.0% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.053 (14.6% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + vote_pre
0.047 (12.9% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "RQ1a: Turnout")
RQ1a: Turnout & -0.036 (0.028) & -0.031 (0.024) & -0.120 (0.099) & 0.047\\ 
(FoxNews) & [-0.091, 0.018] & [-0.079, 0.017] & [-0.315, 0.076] & ($d$=0.129)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 1", hypothesis = "Turnout RQ1a")
> 
> 
> ########################################################
> ### Turnout RQ1b: Huff Post
> ########################################################
> 
> trt <- "HuffPost"
> dv <- "vote_after"
> dv_pre <- "vote_pre"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error  t value  Pr(>|t|)
W3_PATA306_treatment_w3HuffPost 0.03570053 0.02517407 1.418147 0.1565775
                                   CI Lower  CI Upper  DF
W3_PATA306_treatment_w3HuffPost -0.01372224 0.0851233 725
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: 0.026
Std. Error: 0.022
CI Lower: -0.018
CI Upper: 0.070
Pre-treatment DV, Adj R2 = 0.220
N = 737
Lasso covariates, Adj R2 = 0.220
Covariates: vote_pre
N = 737
All covariates, Adj R2 = 0.254
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
> compute_proportion_missing_covars(itt)
0.0% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.053 (14.6% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + vote_pre
0.047 (12.9% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "RQ1b: Turnout")
RQ1b: Turnout & 0.036 (0.025) & 0.026 (0.022) & 0.102 (0.090) & 0.047\\ 
(HuffPost) & [-0.014, 0.085] & [-0.018, 0.070] & [-0.075, 0.279] & ($d$=0.129)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 1", hypothesis = "Turnout RQ1b")
> 
> 
> ########################################################
> ### Media Trust H1a: Trust in Fox News for FN treatment
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> svy$trust_fox_num <- as.numeric(svy$trust_fox)
> 
> trt <- "FoxNews"
> dv <- "trust_fox_num"
> dv_pre <- ""
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error   t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews 0.01787975 0.08351799 0.2140826 0.8305464
                                 CI Lower  CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.1461027 0.1818622 684
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: 0.000
Std. Error: 0.060
CI Lower: -0.117
CI Upper: 0.118
Lasso covariates, Adj R2 = 0.507
Covariates: party7 + ideo + diet_mean_pre
N = 680
All covariates, Adj R2 = 0.540
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.164 (15.0% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo + diet_mean_pre
0.118 (10.8% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H1a: Trust in Fox News")
H1a: Trust in Fox News & 0.018 (0.084) & 0.000 (0.060) & -0.058 (0.260) & 0.118\\ 
(FoxNews) & [-0.146, 0.182] & [-0.117, 0.118] & [-0.569, 0.454] & ($d$=0.108)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 2", hypothesis = "Media Trust H1a")
> 
> 
> ########################################################
> ### Media Trust H1b: Trust in HuffPost for FN treatment
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> svy$trust_hp_num <- as.numeric(svy$trust_hp)
> 
> trt <- "FoxNews"
> dv <- "trust_hp_num"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error  t value   Pr(>|t|)
W3_PATA306_treatment_w3FoxNews -0.1306556 0.07002995 -1.86571 0.06251045
                                 CI Lower    CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.2681554 0.006844272 683
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: -0.133
Std. Error: 0.058
CI Lower: -0.246
CI Upper: -0.019
Lasso covariates, Adj R2 = 0.352
Covariates: party7 + ideo + freq_np + diet_mean_pre
N = 675
All covariates, Adj R2 = 0.399
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
> compute_proportion_missing_covars(itt)
3.3% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.140 (15.0% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo + freq_np + diet_mean_pre
0.112 (12.1% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H1b: Trust in HuffPost")
H1b: Trust in HuffPost & -0.131 (0.070) & -0.133 (0.058) & -0.815 (0.272) & 0.112\\ 
(FoxNews) & [-0.268, 0.007] & [-0.246, -0.019] & [-1.349, -0.280] & ($d$=0.121)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 2", hypothesis = "Media Trust H1b")
> 
> 
> ########################################################
> ### Media Trust H2a: Trust in HuffPost for HP treatment
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> svy$trust_hp_num <- as.numeric(svy$trust_hp)
> 
> trt <- "HuffPost"
> dv <- "trust_hp_num"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error  t value  Pr(>|t|)
W3_PATA306_treatment_w3HuffPost 0.09944352 0.07110919 1.398462 0.1624275
                                   CI Lower CI Upper  DF
W3_PATA306_treatment_w3HuffPost -0.04017498 0.239062 684
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: -0.011
Std. Error: 0.057
CI Lower: -0.124
CI Upper: 0.102
Lasso covariates, Adj R2 = 0.399
Covariates: party7 + ideo + freq_np + diet_mean_pre
N = 669
All covariates, Adj R2 = 0.429
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
> compute_proportion_missing_covars(itt)
3.3% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.140 (15.0% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo + freq_np + diet_mean_pre
0.113 (12.2% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H2a: Trust in HuffPost")
H2a: Trust in HuffPost & 0.099 (0.071) & -0.011 (0.057) & -0.128 (0.248) & 0.113\\ 
(HuffPost) & [-0.040, 0.239] & [-0.124, 0.102] & [-0.615, 0.359] & ($d$=0.122)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 2", hypothesis = "Media Trust H2a")
> 
> 
> ########################################################
> ### Media Trust H2b: Trust in Fox News for HP treatment
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> svy$trust_fox_num <- as.numeric(svy$trust_fox)
> 
> trt <- "HuffPost"
> dv <- "trust_fox_num"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error   t value   Pr(>|t|)
W3_PATA306_treatment_w3HuffPost -0.2001842 0.08173209 -2.449274 0.01456427
                                  CI Lower    CI Upper  DF
W3_PATA306_treatment_w3HuffPost -0.3606602 -0.03970834 684
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: -0.061
Std. Error: 0.061
CI Lower: -0.181
CI Upper: 0.058
Lasso covariates, Adj R2 = 0.482
Covariates: party7 + ideo + diet_mean_pre
N = 675
All covariates, Adj R2 = 0.521
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.164 (15.0% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo + diet_mean_pre
0.118 (10.9% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H2b: Trust in Fox News")
H2b: Trust in Fox News & -0.200 (0.082) & -0.061 (0.061) & -0.239 (0.266) & 0.118\\ 
(HuffPost) & [-0.361, -0.040] & [-0.181, 0.058] & [-0.762, 0.284] & ($d$=0.109)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 2", hypothesis = "Media Trust H2b")
> 
> 
> ########################################################
> ### Media Trust H3a: Media liberal bias for FN treatment
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> svy$bias_num <- as.numeric(svy$bias)
> 
> trt <- "FoxNews"
> dv <- "bias_num"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error   t value Pr(>|t|)
W3_PATA306_treatment_w3FoxNews 0.05144187 0.08492035 0.6057661 0.544871
                                CI Lower  CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.115294 0.2181777 684
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: 0.057
Std. Error: 0.073
CI Lower: -0.087
CI Upper: 0.201
Lasso covariates, Adj R2 = 0.268
Covariates: party7 + ideo + diet_mean_pre
N = 680
All covariates, Adj R2 = 0.331
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.170 (15.0% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo + diet_mean_pre
0.146 (13.0% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H3a: Liberal media bias")
H3a: Liberal media bias & 0.051 (0.085) & 0.057 (0.073) & 0.191 (0.316) & 0.146\\ 
(FoxNews) & [-0.115, 0.218] & [-0.087, 0.201] & [-0.431, 0.812] & ($d$=0.130)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 2", hypothesis = "Media Trust H3a")
> 
> 
> ########################################################
> ### Media Trust H3b: Media liberal bias for HP treatment
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> svy$bias_num <- as.numeric(svy$bias)
> 
> trt <- "HuffPost"
> dv <- "bias_num"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error  t value   Pr(>|t|)
W3_PATA306_treatment_w3HuffPost 0.1536825 0.08431482 1.822722 0.06878191
                                   CI Lower  CI Upper  DF
W3_PATA306_treatment_w3HuffPost -0.01186445 0.3192294 684
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: 0.053
Std. Error: 0.074
CI Lower: -0.093
CI Upper: 0.199
Lasso covariates, Adj R2 = 0.286
Covariates: party7 + ideo + diet_mean_pre
N = 675
All covariates, Adj R2 = 0.317
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.170 (15.0% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo + diet_mean_pre
0.147 (13.0% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H3b: Liberal media bias")
H3b: Liberal media bias & 0.154 (0.084) & 0.053 (0.074) & 0.225 (0.327) & 0.147\\ 
(HuffPost) & [-0.012, 0.319] & [-0.093, 0.199] & [-0.418, 0.869] & ($d$=0.130)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 2", hypothesis = "Media Trust H3b")
> 
> 
> ########################################################
> ### Media Trust RQ1
> ########################################################
> 
> # H1a
> heterogeneous_effect(dv = "trust_fox", 
+                      moderator = "party7", trt = "FoxNews")
Lasso covariates, Adj R2 = 0.507
Covariates: party7 + ideo + diet_mean_pre
N = 680
All covariates, Adj R2 = 0.540
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
W3_PATA306_treatment_w3FoxNews:party7_c 
                                 "n.s." 
> heterogeneous_effect(dv = "trust_fox", 
+                      moderator = "ideo", trt = "FoxNews")
Lasso covariates, Adj R2 = 0.507
Covariates: party7 + ideo + diet_mean_pre
N = 680
All covariates, Adj R2 = 0.540
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
W3_PATA306_treatment_w3FoxNews:ideo_c 
                               "n.s." 
> # H1b
> heterogeneous_effect(dv = "trust_hp", 
+                      moderator = "party7", trt = "FoxNews")
Lasso covariates, Adj R2 = 0.352
Covariates: party7 + ideo + freq_np + diet_mean_pre
N = 675
All covariates, Adj R2 = 0.399
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
W3_PATA306_treatment_w3FoxNews:party7_c 
                                 "n.s." 
> heterogeneous_effect(dv = "trust_hp", 
+                      moderator = "ideo", trt = "FoxNews")
Lasso covariates, Adj R2 = 0.352
Covariates: party7 + ideo + freq_np + diet_mean_pre
N = 675
All covariates, Adj R2 = 0.399
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
W3_PATA306_treatment_w3FoxNews:ideo_c 
                               "n.s." 
> # H2a
> heterogeneous_effect(dv = "trust_hp", 
+                      moderator = "party7", trt = "HuffPost")
Lasso covariates, Adj R2 = 0.399
Covariates: party7 + ideo + freq_np + diet_mean_pre
N = 669
All covariates, Adj R2 = 0.429
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
W3_PATA306_treatment_w3HuffPost:party7_c 
                                  "n.s." 
> heterogeneous_effect(dv = "trust_hp", 
+                      moderator = "ideo", trt = "HuffPost")
Lasso covariates, Adj R2 = 0.399
Covariates: party7 + ideo + freq_np + diet_mean_pre
N = 669
All covariates, Adj R2 = 0.429
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
W3_PATA306_treatment_w3HuffPost:ideo_c 
                                "n.s." 
> # H2b
> heterogeneous_effect(dv = "trust_fox", 
+                      moderator = "party7", trt = "HuffPost")
Lasso covariates, Adj R2 = 0.482
Covariates: party7 + ideo + diet_mean_pre
N = 675
All covariates, Adj R2 = 0.521
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
W3_PATA306_treatment_w3HuffPost:party7_c 
                                  "n.s." 
> heterogeneous_effect(dv = "trust_fox", 
+                      moderator = "ideo", trt = "HuffPost")
Lasso covariates, Adj R2 = 0.482
Covariates: party7 + ideo + diet_mean_pre
N = 675
All covariates, Adj R2 = 0.521
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
W3_PATA306_treatment_w3HuffPost:ideo_c 
                                "n.s." 
> # H3a
> heterogeneous_effect(dv = "bias", 
+                      moderator = "party7", trt = "FoxNews")
Lasso covariates, Adj R2 = 0.268
Covariates: party7 + ideo + diet_mean_pre
N = 680
All covariates, Adj R2 = 0.331
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
W3_PATA306_treatment_w3FoxNews:party7_c 
                                    "+" 
> heterogeneous_effect(dv = "bias", 
+                      moderator = "ideo", trt = "FoxNews")
Lasso covariates, Adj R2 = 0.268
Covariates: party7 + ideo + diet_mean_pre
N = 680
All covariates, Adj R2 = 0.331
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
W3_PATA306_treatment_w3FoxNews:ideo_c 
                                  "-" 
> # H3b
> heterogeneous_effect(dv = "bias", 
+                      moderator = "party7", trt = "HuffPost")
Lasso covariates, Adj R2 = 0.286
Covariates: party7 + ideo + diet_mean_pre
N = 675
All covariates, Adj R2 = 0.317
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
W3_PATA306_treatment_w3HuffPost:party7_c 
                                  "n.s." 
> heterogeneous_effect(dv = "bias", 
+                      moderator = "ideo", trt = "HuffPost")
Lasso covariates, Adj R2 = 0.286
Covariates: party7 + ideo + diet_mean_pre
N = 675
All covariates, Adj R2 = 0.317
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
W3_PATA306_treatment_w3HuffPost:ideo_c 
                                "n.s." 
> 
> 
> ########################################################
> ### Media Trust H4a: Media trust for FN group
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> svy$trust_num <- as.numeric(svy$trust)
> 
> trt <- "FoxNews"
> dv <- "trust_num"
> dv_pre <- ""
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error  t value   Pr(>|t|)
W3_PATA306_treatment_w3FoxNews -0.1179004 0.07080725 -1.66509 0.09635274
                                 CI Lower   CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.2569261 0.02112522 684
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: -0.125
Std. Error: 0.053
CI Lower: -0.229
CI Upper: -0.022
Lasso covariates, Adj R2 = 0.462
Covariates: party7 + ideo + polint + freq_np + diet_mean_pre
N = 674
All covariates, Adj R2 = 0.485
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
> compute_proportion_missing_covars(itt)
3.5% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.142 (15.0% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo + polint + freq_np + diet_mean_pre
0.106 (11.2% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H4a: Media trust")
H4a: Media trust & -0.118 (0.071) & -0.125 (0.053) & -0.538 (0.232) & 0.106\\ 
(FoxNews) & [-0.257, 0.021] & [-0.229, -0.022] & [-0.994, -0.082] & ($d$=0.112)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 2", hypothesis = "Media Trust H4a")
> 
> 
> # substantive magnitude?
> svy %>% group_by(ideo) %>% summarize(avg_trust = mean(trust, na.rm = TRUE))
# A tibble: 6 x 2
   ideo avg_trust
* <dbl>     <dbl>
1     1      3.15
2     2      3.20
3     3      2.60
4     4      1.94
5     5      1.68
6    NA      2.54
> .123/(3.2-1.94) # .098
[1] 0.09761905
> .566/(3.2-1.94) # .45
[1] 0.4492063
> 
> svy %>% group_by(educ) %>% summarize(avg_trust = mean(trust, na.rm = TRUE))
# A tibble: 6 x 2
   educ avg_trust
* <dbl>     <dbl>
1     1      2.33
2     2      2.45
3     3      2.46
4     4      2.31
5     5      2.67
6     6      2.63
> .123/(2.63-2.33) # .41
[1] 0.41
> .566/(2.63-2.33) # 1.89x
[1] 1.886667
> 
> svy$diet_mean_cats <- cut(svy$diet_mean_pre, breaks = quantile(svy$diet_mean_pre, probs = seq(0, 1, by = 0.25)), include.lowest = TRUE, labels = 1:4)
> svy$diet_mean_cats2 <- cut(svy$diet_mean_pre, breaks = c(min(svy$diet_mean_pre), -.5, 0, .5, max(svy$diet_mean_pre)), include.lowest = TRUE)
> svy %>% group_by(diet_mean_cats2) %>% summarize(avg_trust = mean(trust, na.rm = TRUE),
+                                                       avg_diet = mean(diet_mean_pre))
# A tibble: 4 x 3
  diet_mean_cats2 avg_trust avg_diet
* <fct>               <dbl>    <dbl>
1 [-0.606,-0.5]        2.57  -0.530 
2 (-0.5,0]             2.75  -0.0711
3 (0,0.5]              2.20   0.0941
4 (0.5,0.898]          1.52   0.658 
> .123/(2.2-1.52) # .18
[1] 0.1808824
> .566/(2.2-1.52) # .83
[1] 0.8323529
> 
> ########################################################
> ### Media Trust H4b: Media trust for HP group
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> svy$trust_num <- as.numeric(svy$trust)
> 
> trt <- "HuffPost"
> dv <- "trust_num"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error   t value  Pr(>|t|)
W3_PATA306_treatment_w3HuffPost 0.02605716 0.07213291 0.3612382 0.7180329
                                  CI Lower  CI Upper  DF
W3_PATA306_treatment_w3HuffPost -0.1155713 0.1676857 684
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: -0.084
Std. Error: 0.054
CI Lower: -0.189
CI Upper: 0.022
Lasso covariates, Adj R2 = 0.487
Covariates: party7 + ideo + polint + freq_np + diet_mean_pre
N = 668
All covariates, Adj R2 = 0.514
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
> compute_proportion_missing_covars(itt)
3.5% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.142 (15.0% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo + polint + freq_np + diet_mean_pre
0.106 (11.3% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H4b: Media trust")
H4b: Media trust & 0.026 (0.072) & -0.084 (0.054) & -0.378 (0.223) & 0.106\\ 
(HuffPost) & [-0.116, 0.168] & [-0.189, 0.022] & [-0.817, 0.060] & ($d$=0.113)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 2", hypothesis = "Media Trust H4b")
> 
> 
> ########################################################
> ### Media Trust H4a: Media trust for FN group (w7)
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> svy$trust_w7_num <- as.numeric(svy$trust_w7)
> 
> trt <- "FoxNews"
> dv <- "trust_w7_num"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error  t value Pr(>|t|)
W3_PATA306_treatment_w3FoxNews -0.09930171 0.07926951 -1.25271 0.210779
                                 CI Lower   CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.2549681 0.05636465 626
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: -0.132
Std. Error: 0.058
CI Lower: -0.245
CI Upper: -0.019
Lasso covariates, Adj R2 = 0.496
Covariates: party7 + agesq + ideo + freq_tv + freq_np + diet_mean_pre
N = 617
All covariates, Adj R2 = 0.503
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 416
> compute_proportion_missing_covars(itt)
3.9% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.157 (15.7% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + agesq + ideo + freq_tv + freq_np + diet_mean_pre
0.115 (11.5% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H4a: Media trust")
H4a: Media trust & -0.099 (0.079) & -0.132 (0.058) & -0.562 (0.261) & 0.115\\ 
(FoxNews) & [-0.255, 0.056] & [-0.245, -0.019] & [-1.074, -0.049] & ($d$=0.115)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "No", hypothesis = "Media Trust H4a-7w")
> 
> 
> ########################################################
> ### Media Trust H4b: Media trust for HP group (w7)
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> svy$trust_w7_num <- as.numeric(svy$trust_w7)
> 
> trt <- "HuffPost"
> dv <- "trust_w7_num"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                   Estimate Std. Error    t value  Pr(>|t|)
W3_PATA306_treatment_w3HuffPost -0.04877517 0.07894338 -0.6178501 0.5368953
                                  CI Lower CI Upper  DF
W3_PATA306_treatment_w3HuffPost -0.2037964 0.106246 636
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: -0.165
Std. Error: 0.059
CI Lower: -0.281
CI Upper: -0.048
Lasso covariates, Adj R2 = 0.472
Covariates: party7 + agesq + ideo + freq_tv + freq_np + diet_mean_pre
N = 619
All covariates, Adj R2 = 0.486
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 416
> compute_proportion_missing_covars(itt)
3.9% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.155 (15.6% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + agesq + ideo + freq_tv + freq_np + diet_mean_pre
0.115 (11.5% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H4b: Media trust")
H4b: Media trust & -0.049 (0.079) & -0.165 (0.059) & -0.721 (0.275) & 0.115\\ 
(HuffPost) & [-0.204, 0.106] & [-0.281, -0.048] & [-1.262, -0.180] & ($d$=0.115)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "No", hypothesis = "Media Trust H4b-7w")
> 
> 
> ########################################################
> ### Factual knowledge H1: % foreign born
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> svy$W4_PATA430a_num <- as.numeric(svy$W4_PATA430a)
> 
> trt <- "FoxNews"
> dv <- "W4_PATA430a_num"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "HuffPost", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error   t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews -0.6558467   1.393086 -0.470787 0.6379461
                                CI Lower CI Upper  DF
W3_PATA306_treatment_w3FoxNews -3.391186 2.079493 670
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt, control="HuffPost")
Estimate: 0.656
Std. Error: 1.393
CI Lower: -2.079
CI Upper: 3.391
All covariates, Adj R2 = 0.124
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
> compute_proportion_missing_covars(itt)
0.0% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt, control="HuffPost")
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt) 
MDE without covariate adjustment:
2.799 (15.2% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3
2.804 (15.2% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H1: \\% foreign born")
H1: \% foreign born & -0.656 (1.393) & 0.656 (1.393) & -1.352 (5.553) & 2.804\\ 
(FoxNews) & [-3.391, 2.079] & [-2.079, 3.391] & [-12.264, 9.560] & ($d$=0.152)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 2", hypothesis = "Factual Knowledge H1")
> 
> 
> ########################################################
> ### Factual knowledge H2: % unemployment rate
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> svy$W4_PATA430b_num <- as.numeric(svy$W4_PATA430b)
> 
> trt <- "HuffPost"
> dv <- "W4_PATA430b_num"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "HuffPost", 
+                             condition2 = trt))
Design:  Blocked 
                                Estimate Std. Error t value Pr(>|t|)  CI Lower
W3_PATA306_treatment_w3HuffPost        0   1.319481       0        1 -2.595684
                                CI Upper  DF
W3_PATA306_treatment_w3HuffPost 2.595684 329
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt, control="FoxNews")
Estimate: 1.226
Std. Error: 1.238
CI Lower: -1.205
CI Upper: 3.657
All covariates, Adj R2 = 0.165
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
> compute_proportion_missing_covars(itt)
0.0% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt, control="FoxNews")
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
2.283 (15.2% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3
2.284 (15.2% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H2: \\% unemployment")
H2: \% unemployment & 0.000 (1.319) & 1.226 (1.238) & 8.829 (5.663) & 2.284\\ 
(HuffPost) & [-2.596, 2.596] & [-1.205, 3.657] & [-2.298, 19.957] & ($d$=0.152)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 2", hypothesis = "Factual Knowledge H2")
> 
> 
> ########################################################
> ### Factual knowledge RQ1a: news reception for HP group
> ########################################################
> 
> trt <- "HuffPost"
> dv <- "event_mokken"
> dv_pre <- "event_pre_mokken"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate  Std. Error  t value   Pr(>|t|)
W3_PATA306_treatment_w3HuffPost 0.01223901 0.005160803 2.371533 0.01799044
                                   CI Lower   CI Upper  DF
W3_PATA306_treatment_w3HuffPost 0.002106094 0.02237193 684
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt, dv_pre = dv_pre)
Estimate: 0.010
Std. Error: 0.005
CI Lower: 0.000
CI Upper: 0.020
Pre-treatment DV, Adj R2 = 0.137
N = 696
Lasso covariates, Adj R2 = 0.203
Covariates: polint + log_news_pre + event_pre_mokken
N = 533
All covariates, Adj R2 = 0.220
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
> compute_proportion_missing_covars(itt)
22.9% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.010 (15.0% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + polint + log_news_pre + event_pre_mokken
0.010 (14.6% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "RQ1a: Event knowledge")
RQ1a: Event knowledge & 0.012 (0.005) & 0.010 (0.005) & 0.044 (0.020) & 0.010\\ 
(HuffPost) & [0.002, 0.022] & [0.000, 0.020] & [0.006, 0.083] & ($d$=0.146)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 2", hypothesis = "Factual Knowledge RQ1a")
> 
> 
> ########################################################
> ### Factual knowledge RQ1b: news reception for FN group
> ########################################################
> 
> trt <- "FoxNews"
> dv <- "event_mokken"
> dv_pre <- "event_pre_mokken"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate  Std. Error  t value    Pr(>|t|)
W3_PATA306_treatment_w3FoxNews 0.01559756 0.005234621 2.979692 0.002987649
                                  CI Lower   CI Upper  DF
W3_PATA306_treatment_w3FoxNews 0.005319704 0.02587541 684
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt, dv_pre = dv_pre)
Estimate: 0.017
Std. Error: 0.005
CI Lower: 0.007
CI Upper: 0.027
Pre-treatment DV, Adj R2 = 0.154
N = 696
Lasso covariates, Adj R2 = 0.242
Covariates: polint + log_news_pre + event_pre_mokken
N = 534
All covariates, Adj R2 = 0.277
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
> compute_proportion_missing_covars(itt)
22.9% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.010 (15.0% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + polint + log_news_pre + event_pre_mokken
0.010 (14.6% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "RQ1b: Event knowledge")
RQ1b: Event knowledge & 0.016 (0.005) & 0.017 (0.005) & 0.059 (0.019) & 0.010\\ 
(FoxNews) & [0.005, 0.026] & [0.007, 0.027] & [0.022, 0.096] & ($d$=0.146)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 2", hypothesis = "Factual Knowledge RQ1b")
> 
> 
> ########################################################
> ### Knowledge RQ2
> ########################################################
> 
> # H1
> heterogeneous_effect(dv = "W4_PATA430a", 
+                      moderator = "party7", trt = "FoxNews")
All covariates, Adj R2 = 0.057
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
W3_PATA306_treatment_w3FoxNews:party7_c 
                                 "n.s." 
> heterogeneous_effect(dv = "W4_PATA430a", 
+                      moderator = "ideo", trt = "FoxNews")
All covariates, Adj R2 = 0.057
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
W3_PATA306_treatment_w3FoxNews:ideo_c 
                               "n.s." 
> 
> # H2
> heterogeneous_effect(dv = "W4_PATA430b", 
+                      moderator = "party7", trt = "HuffPost")
All covariates, Adj R2 = 0.131
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
W3_PATA306_treatment_w3HuffPost:party7_c 
                                     "-" 
> heterogeneous_effect(dv = "W4_PATA430b", 
+                      moderator = "ideo", trt = "HuffPost")
All covariates, Adj R2 = 0.131
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
W3_PATA306_treatment_w3HuffPost:ideo_c 
                                "n.s." 
> 
> # RQ1a
> heterogeneous_effect(dv = "event_mokken", dv_pre = "event_pre_mokken",
+                      moderator = "party7", trt = "HuffPost")
Pre-treatment DV, Adj R2 = 0.137
N = 696
Lasso covariates, Adj R2 = 0.203
Covariates: polint + log_news_pre + event_pre_mokken
N = 533
All covariates, Adj R2 = 0.220
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
W3_PATA306_treatment_w3HuffPost:party7_c 
                                  "n.s." 
> heterogeneous_effect(dv = "event_mokken", dv_pre = "event_pre_mokken",
+                      moderator = "ideo", trt = "HuffPost")
Pre-treatment DV, Adj R2 = 0.137
N = 696
Lasso covariates, Adj R2 = 0.203
Covariates: polint + log_news_pre + event_pre_mokken
N = 533
All covariates, Adj R2 = 0.220
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
W3_PATA306_treatment_w3HuffPost:ideo_c 
                                "n.s." 
> 
> # RQ1b
> heterogeneous_effect(dv = "event_mokken", dv_pre = "event_pre_mokken",
+                      moderator = "party7", trt = "FoxNews")
Pre-treatment DV, Adj R2 = 0.154
N = 696
Lasso covariates, Adj R2 = 0.242
Covariates: polint + log_news_pre + event_pre_mokken
N = 534
All covariates, Adj R2 = 0.277
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
W3_PATA306_treatment_w3FoxNews:party7_c 
                                 "n.s." 
> heterogeneous_effect(dv = "event_mokken", dv_pre = "event_pre_mokken",
+                      moderator = "ideo", trt = "FoxNews")
Pre-treatment DV, Adj R2 = 0.154
N = 696
Lasso covariates, Adj R2 = 0.242
Covariates: polint + log_news_pre + event_pre_mokken
N = 534
All covariates, Adj R2 = 0.277
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
W3_PATA306_treatment_w3FoxNews:ideo_c 
                               "n.s." 
> 
> 
> ########################################################
> ### Factual knowledge RQ1a: immigration knowledge for FN group
> ########################################################
> 
> svy$know_immig_w2_TRUE <- svy$W2_PATA2_10_m_3 == 1
> svy$know_immig_w4_TRUE <- svy$W4_PATA409_1 == 1
> 
> trt <- "FoxNews"
> dv <- "know_immig_w4_TRUE"
> dv_pre <- "know_immig_w2_TRUE"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error  t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews 0.02473143  0.0250366 0.987811 0.3235945
                                  CI Lower   CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.02442639 0.07388926 684
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt, dv_pre = dv_pre)
Estimate: 0.025
Std. Error: 0.025
CI Lower: -0.024
CI Upper: 0.074
Pre-treatment DV, Adj R2 = -0.002
N = 696
All covariates, Adj R2 = 0.071
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
> compute_proportion_missing_covars(itt)
0.0% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.050 (15.0% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3
0.050 (15.0% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "RQ1b: Immigration event knowledge")
RQ1b: Immigration event knowledge & 0.025 (0.025) & 0.025 (0.025) & 0.047 (0.093) & 0.050\\ 
(FoxNews) & [-0.024, 0.074] & [-0.024, 0.074] & [-0.137, 0.231] & ($d$=0.150)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "No", hypothesis = "Factual Knowledge RQ1a-immig")
> 
> 
> ########################################################
> ### Factual knowledge RQ1b: immigration knowledge for HP group
> ########################################################
> 
> svy$know_immig_w2_TRUE <- svy$W2_PATA2_10_m_3 == 1
> svy$know_immig_w4_TRUE <- svy$W4_PATA409_1 == 1
> 
> trt <- "HuffPost"
> dv <- "know_immig_w4_TRUE"
> dv_pre <- "know_immig_w2_TRUE"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                   Estimate Std. Error   t value Pr(>|t|)
W3_PATA306_treatment_w3HuffPost 0.002694128  0.0258819 0.1040931 0.917126
                                   CI Lower   CI Upper  DF
W3_PATA306_treatment_w3HuffPost -0.04812339 0.05351165 684
> 
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt, dv_pre = dv_pre)
Estimate: 0.003
Std. Error: 0.026
CI Lower: -0.048
CI Upper: 0.054
Pre-treatment DV, Adj R2 = -0.003
N = 696
All covariates, Adj R2 = 0.059
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
> compute_proportion_missing_covars(itt)
0.0% missing
> 
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.050 (15.0% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3
0.050 (15.0% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "RQ1b: Immigration event knowledge")
RQ1b: Immigration event knowledge & 0.003 (0.026) & 0.003 (0.026) & -0.019 (0.101) & 0.050\\ 
(HuffPost) & [-0.048, 0.054] & [-0.048, 0.054] & [-0.218, 0.180] & ($d$=0.150)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "No", hypothesis = "Factual Knowledge RQ1b-immig")
> 
> 
> 
> ########################################################
> ### Election prediction H1
> ########################################################
> 
> # Subjects assigned to the Fox News treatment...
> 
> # H1a: ... will be more likely to predict the Republican Party as winning the control of the House of Representatives
> trt <- "FoxNews"
> dv <- "predicted_house_winner_gop"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error    t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews -0.03763526 0.03797817 -0.9909708 0.3220508
                                 CI Lower   CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.1122032 0.03693273 683
> 
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: -0.042
Std. Error: 0.031
CI Lower: -0.103
CI Upper: 0.020
Lasso covariates, Adj R2 = 0.343
Covariates: party7 + ideo
N = 679
All covariates, Adj R2 = 0.326
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 462
> compute_proportion_missing_covars(itt)
2.6% missing
> 
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.075 (15.0% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo
0.061 (12.2% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H1a: GOP House winner")
H1a: GOP House winner & -0.038 (0.038) & -0.042 (0.031) & -0.078 (0.138) & 0.061\\ 
(FoxNews) & [-0.112, 0.037] & [-0.103, 0.020] & [-0.349, 0.192] & ($d$=0.122)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 2", hypothesis = "Election Prediction H1a")
> 
> # H1b: ... will predict a higher House vote share for the Republican Party 
> 
> # creating numeric dvs to avoid labelled error
> svy$predicted_vote_share_gop_num <- as.numeric(svy$predicted_vote_share_gop)
> 
> trt <- "FoxNews"
> dv <- "predicted_vote_share_gop_num"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error    t value Pr(>|t|)
W3_PATA306_treatment_w3FoxNews -0.7538512   1.261932 -0.5973787 0.550491
                                CI Lower CI Upper  DF
W3_PATA306_treatment_w3FoxNews -3.232437 1.724734 572
> 
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: -1.151
Std. Error: 1.106
CI Lower: -3.324
CI Upper: 1.022
Lasso covariates, Adj R2 = 0.230
Covariates: party7
N = 583
All covariates, Adj R2 = 0.261
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 405
> compute_proportion_missing_covars(itt)
0.3% missing
> 
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
2.418 (16.4% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7
2.126 (14.4% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H1b: GOP House vote share")
H1b: GOP House vote share & -0.754 (1.262) & -1.151 (1.106) & -0.690 (4.453) & 2.126\\ 
(FoxNews) & [-3.232, 1.725] & [-3.324, 1.022] & [-9.445, 8.065] & ($d$=0.144)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 2", hypothesis = "Election Prediction H1b")
> 
> 
> # H1c: ... will be more likely to predict the Republican candidate to win the race for the House seat in their Congressional district
> 
> trt <- "FoxNews"
> dv <- "predicted_district_winner_gop"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                    Estimate Std. Error     t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews -0.0005373762 0.03784799 -0.01419828 0.9886759
                                  CI Lower CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.07484975 0.073775 683
> 
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: -0.001
Std. Error: 0.033
CI Lower: -0.065
CI Upper: 0.063
Lasso covariates, Adj R2 = 0.282
Covariates: party7 + ideo
N = 679
All covariates, Adj R2 = 0.288
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
> compute_proportion_missing_covars(itt)
2.6% missing
> 
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.075 (15.0% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo
0.065 (12.9% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H1c: GOP House district winner")
H1c: GOP House district winner & -0.001 (0.038) & -0.001 (0.033) & -0.010 (0.141) & 0.065\\ 
(FoxNews) & [-0.075, 0.074] & [-0.065, 0.063] & [-0.287, 0.268] & ($d$=0.129)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 2", hypothesis = "Election Prediction H1c")
> 
> 
> ########################################################
> ### Election prediction H2
> ########################################################
> 
> # Subjects assigned to the HuffPost treatment...
> 
> # H2a: ... will be more likely to predict the Democratic Party as winning the control of the House of Representatives
> trt <- "HuffPost"
> dv <- "predicted_house_winner_dem"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error  t value   Pr(>|t|)
W3_PATA306_treatment_w3HuffPost 0.07506988 0.03744599 2.004751 0.04538333
                                   CI Lower  CI Upper  DF
W3_PATA306_treatment_w3HuffPost 0.001546987 0.1485928 684
> 
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: 0.022
Std. Error: 0.031
CI Lower: -0.038
CI Upper: 0.083
Lasso covariates, Adj R2 = 0.374
Covariates: party7 + ideo
N = 675
All covariates, Adj R2 = 0.366
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
> compute_proportion_missing_covars(itt)
2.6% missing
> 
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.075 (15.0% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo
0.061 (12.2% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H2a: DEM House winner")
H2a: DEM House winner & 0.075 (0.037) & 0.022 (0.031) & 0.050 (0.135) & 0.061\\ 
(HuffPost) & [0.002, 0.149] & [-0.038, 0.083] & [-0.214, 0.314] & ($d$=0.122)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 2", hypothesis = "Election Prediction H2a")
> 
> 
> 
> # H2b: ... will predict a higher national two-party vote share for the Democratic Party
> 
> # creating numeric dvs to avoid labelled error
> svy$predicted_vote_share_dem_num <- as.numeric(svy$predicted_vote_share_dem)
> 
> trt <- "HuffPost"
> dv <- "predicted_vote_share_dem_num"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                Estimate Std. Error   t value  Pr(>|t|)
W3_PATA306_treatment_w3HuffPost 1.137587   1.209191 0.9407836 0.3472061
                                 CI Lower CI Upper  DF
W3_PATA306_treatment_w3HuffPost -1.237322 3.512496 582
> 
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: 0.451
Std. Error: 1.068
CI Lower: -1.646
CI Upper: 2.548
Lasso covariates, Adj R2 = 0.230
Covariates: party7
N = 591
All covariates, Adj R2 = 0.314
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 404
> compute_proportion_missing_covars(itt)
0.3% missing
> 
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
2.397 (16.3% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7
2.111 (14.3% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H2b: DEM House vote share")
H2b: DEM House vote share & 1.138 (1.209) & 0.451 (1.068) & 3.818 (4.447) & 2.111\\ 
(HuffPost) & [-1.237, 3.512] & [-1.646, 2.548] & [-4.924, 12.560] & ($d$=0.143)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 2", hypothesis = "Election Prediction H2b")
> 
> 
> # H2c: ... will be more likely to predict the Democratic candidate to win the race for the House seat in their Congressional district
> 
> trt <- "HuffPost"
> dv <- "predicted_district_winner_dem"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error   t value  Pr(>|t|)
W3_PATA306_treatment_w3HuffPost 0.02292497 0.03767614 0.6084746 0.5430747
                                   CI Lower   CI Upper  DF
W3_PATA306_treatment_w3HuffPost -0.05104979 0.09689974 684
> 
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: -0.023
Std. Error: 0.033
CI Lower: -0.088
CI Upper: 0.042
Lasso covariates, Adj R2 = 0.273
Covariates: party7 + ideo
N = 675
All covariates, Adj R2 = 0.256
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
> compute_proportion_missing_covars(itt)
2.6% missing
> 
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.075 (15.0% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo
0.065 (12.9% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H2c: DEM House district winner")
H2c: DEM House district winner & 0.023 (0.038) & -0.023 (0.033) & -0.012 (0.147) & 0.065\\ 
(HuffPost) & [-0.051, 0.097] & [-0.088, 0.042] & [-0.301, 0.278] & ($d$=0.129)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 2", hypothesis = "Election Prediction H2c")
> 
> 
> 
> ########################################################
> ### Election prediction H3
> ########################################################
> 
> # Pre-treatment Republican partisans in the Fox News treatment group and pre-treatment Democratic partisans in the HuffPost treatment group will report a higher average certainty in their predictions than subjects assigned to the control group.
> 
> # creating numeric dvs to avoid labelled error
> svy$prediction_certainty_num <- as.numeric(svy$prediction_certainty)
> 
> # creating combined treatment variable
> svy$treatment_any <- as.character(svy$W3_PATA306_treatment_w3)
> svy$treatment_any[svy$treatment_any %in% c("FoxNews", "HuffPost")] <- "Treatment"
> 
> svy_sub <- filter(svy, (W3_PATA306_treatment_w3 == "FoxNews" & partylean == "Republican") | (W3_PATA306_treatment_w3 == "HuffPost" & partylean == "Democrat") | W3_PATA306_treatment_w3 == "Control")
> 
> trt <- "Treatment"
> dv <- "prediction_certainty_num"
> D <- "comp_fn"
> 
> ## DIM WITHOUT BLOCKING (data sparsity issue)
> (dim <- difference_in_means(formula(paste0(dv, " ~ treatment_any")), 
+                             #blocks = W3_Browser_treatment_w3, 
+                             data = svy_sub, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Standard 
                         Estimate Std. Error   t value  Pr(>|t|)   CI Lower
treatment_anyTreatment 0.07310614  0.1747499 0.4183472 0.6758285 -0.2700226
                        CI Upper       DF
treatment_anyTreatment 0.4162349 664.2052
> 
> ## ITT WITHOUT Lin's covariate adjustment (data sparsity issue)
> form <- as.formula("prediction_certainty ~ treatment_any")
> itt <- lm_robust(form, data = svy_sub)
> 
> 
> ## CACE WITHOUT Lin's covariate adjustment (data sparsity issue)
> form <- as.formula("prediction_certainty ~ comp_fn | treatment_any")
> cace <- iv_robust(form, data = svy_sub)
> 
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = FALSE, D, trt, trt_var = "treatment_any")
MDE without covariate adjustment:
0.351 (15.3% of a 1-SD increase in DV)
> pwr <- data.frame(pwr_itt = c(0.351, 0.153))
> 
> format_latex2(dim, list(itt), cace, trt, pwr,
+               dv = "H3: \\ Prediction certainty")
H3: \ Prediction certainty & 0.073 (0.175) & 0.073 (0.175) & -1.017 (1.452) & 0.351\\ 
(Treatment) & [-0.270, 0.416] & [-0.270, 0.416] & [-3.871, 1.837] & ($d$=0.153)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt, cace, prereg = "Study 2", hypothesis = "Prediction uncertainty H3")
> 
> 
> 
> 
> ########################################################
> ### Election prediction H4
> ########################################################
> 
> # Pre-treatment Republican partisans in the HuffPost treatment group and pre-treatment Democratic partisans in the Fox News treatment group will report a lower average certainty in their predictions than subjects assigned to the control group.
> 
> svy_sub <- filter(svy, (W3_PATA306_treatment_w3 == "FoxNews" & partylean == "Democrat") | (W3_PATA306_treatment_w3 == "HuffPost" & partylean == "Republican") | W3_PATA306_treatment_w3 == "Control")
> 
> trt <- "Treatment"
> dv <- "prediction_certainty_num"
> D <- "comp_fn"
> 
> ## DIM WITHOUT BLOCKING (data sparsity issue)
> (dim <- difference_in_means(formula(paste0(dv, " ~ treatment_any")), 
+                             #blocks = W3_Browser_treatment_w3, 
+                             data = svy_sub, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Standard 
                        Estimate Std. Error   t value  Pr(>|t|)   CI Lower
treatment_anyTreatment 0.1355621  0.1784609 0.7596178 0.4477815 -0.2149221
                        CI Upper       DF
treatment_anyTreatment 0.4860463 599.8044
> 
> ## ITT WITHOUT Lin's covariate adjustment (data sparsity issue)
> form <- as.formula("prediction_certainty ~ treatment_any")
> itt <- lm_robust(form, data = svy_sub)
> 
> 
> ## CACE WITHOUT Lin's covariate adjustment (data sparsity issue)
> form <- as.formula("prediction_certainty ~ comp_fn | treatment_any")
> cace <- iv_robust(form, data = svy_sub)
> 
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = FALSE, D, trt, trt_var = "treatment_any")
MDE without covariate adjustment:
0.363 (15.8% of a 1-SD increase in DV)
> pwr <- data.frame(pwr_itt = c(0.363, 0.158))
> 
> format_latex2(dim, list(itt), cace, trt, pwr,
+               dv = "H4: \\ Prediction certainty")
H4: \ Prediction certainty & 0.136 (0.178) & 0.136 (0.178) & -0.558 (1.826) & 0.363\\ 
(Treatment) & [-0.215, 0.486] & [-0.215, 0.486] & [-4.147, 3.031] & ($d$=0.158)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt, cace, prereg = "Study 2", hypothesis = "Prediction uncertainty H4")
> 
> 
> 
> 
> ########################################################
> ### Bombing H1
> ########################################################
> 
> # Bombing H1a: Fox News treatment vs. Control/HuffPost
> 
> # creating numeric dvs to avoid labelled error
> svy$W4_PATA462_a_num <- as.numeric(svy$W4_PATA462_a)
> 
> trt <- "FoxNews"
> dv <- "W4_PATA462_a_num"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error    t value Pr(>|t|)
W3_PATA306_treatment_w3FoxNews -0.0210201  0.1046014 -0.2009544 0.840794
                                 CI Lower  CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.2263984 0.1843582 684
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: 0.008
Std. Error: 0.089
CI Lower: -0.168
CI Upper: 0.183
Lasso covariates, Adj R2 = 0.295
Covariates: party7 + ideo
N = 680
All covariates, Adj R2 = 0.288
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.203 (15.0% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo
0.170 (12.6% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H1a: Mail-bombing is a false flag")
H1a: Mail-bombing is a false flag & -0.021 (0.105) & 0.008 (0.089) & 0.392 (0.394) & 0.170\\ 
(FoxNews) & [-0.226, 0.184] & [-0.168, 0.183] & [-0.381, 1.165] & ($d$=0.126)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 2", hypothesis = "Mail-Bombing H1a")
> 
> 
> # Bombing H1b: Fox News treatment vs. HuffPost treatment
> 
> trt <- "FoxNews"
> dv <- "W4_PATA462_a_num"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "HuffPost", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error   t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews 0.09763322  0.1023784 0.9536507 0.3406044
                                 CI Lower  CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.1033879 0.2986543 670
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: 0.008
Std. Error: 0.089
CI Lower: -0.168
CI Upper: 0.183
Lasso covariates, Adj R2 = 0.295
Covariates: party7 + ideo
N = 680
All covariates, Adj R2 = 0.288
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.205 (15.2% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo
0.170 (12.6% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H1b: Mail-bombing is a false flag")
H1b: Mail-bombing is a false flag & 0.098 (0.102) & 0.008 (0.089) & 8.121 (12.236) & 0.170\\ 
(FoxNews) & [-0.103, 0.299] & [-0.168, 0.183] & [-15.924, 32.167] & ($d$=0.126)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 2", hypothesis = "Mail-Bombing H1b")
> 
> 
> ########################################################
> ### Bombing H2
> ########################################################
> 
> # Bombing H2a: Fox News treatment vs. Control
> 
> # creating numeric dvs to avoid labelled error
> svy$W4_PATA462_b_num <- as.numeric(svy$W4_PATA462_b)
> 
> trt <- "FoxNews"
> dv <- "W4_PATA462_b_num"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error    t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews -0.01778059   0.110744 -0.1605558 0.8724906
                                 CI Lower  CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.2352195 0.1996584 684
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: -0.036
Std. Error: 0.089
CI Lower: -0.211
CI Upper: 0.139
Lasso covariates, Adj R2 = 0.378
Covariates: party7 + ideo + diet_mean_pre
N = 680
All covariates, Adj R2 = 0.409
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.220 (15.0% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo + diet_mean_pre
0.177 (12.1% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H2a: Media is accountable")
H2a: Media is accountable & -0.018 (0.111) & -0.036 (0.089) & 0.192 (0.387) & 0.177\\ 
(FoxNews) & [-0.235, 0.200] & [-0.211, 0.139] & [-0.569, 0.952] & ($d$=0.121)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 2", hypothesis = "Mail-Bombing H2a")
> 
> 
> # Bombing H2b: Fox News treatment vs. HuffPost treatment
> 
> trt <- "FoxNews"
> dv <- "W4_PATA462_b_num"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "HuffPost", 
+                             condition2 = trt))
Design:  Blocked 
                                Estimate Std. Error  t value   Pr(>|t|)
W3_PATA306_treatment_w3FoxNews 0.1879029  0.1107371 1.696838 0.09019253
                                  CI Lower  CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.02953123 0.4053369 669
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: -0.036
Std. Error: 0.089
CI Lower: -0.211
CI Upper: 0.139
Lasso covariates, Adj R2 = 0.378
Covariates: party7 + ideo + diet_mean_pre
N = 680
All covariates, Adj R2 = 0.409
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.223 (15.2% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo + diet_mean_pre
0.177 (12.1% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H2b: Media is accountable")
H2b: Media is accountable & 0.188 (0.111) & -0.036 (0.089) & 3.365 (7.527) & 0.177\\ 
(FoxNews) & [-0.030, 0.405] & [-0.211, 0.139] & [-11.427, 18.157] & ($d$=0.121)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 2", hypothesis = "Mail-Bombing H2b")
> 
> 
> ########################################################
> ### Bombing H3a
> ########################################################
> 
> # Bombing H3a: Fox News treatment vs. Control
> 
> # creating numeric dvs to avoid labelled error
> svy$W4_PATA462_c_num <- as.numeric(svy$W4_PATA462_c)
> 
> trt <- "FoxNews"
> dv <- "W4_PATA462_c_num"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error    t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews -0.03457974  0.1288459 -0.2683806 0.7884873
                                 CI Lower  CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.2875607 0.2184012 684
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: -0.027
Std. Error: 0.082
CI Lower: -0.188
CI Upper: 0.134
Lasso covariates, Adj R2 = 0.611
Covariates: party7 + ideo + diet_mean_pre
N = 680
All covariates, Adj R2 = 0.620
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.256 (15.0% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo + diet_mean_pre
0.161 (9.5% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H3a: Trump is accountable")
H3a: Trump is accountable & -0.035 (0.129) & -0.027 (0.082) & -0.078 (0.355) & 0.161\\ 
(FoxNews) & [-0.288, 0.218] & [-0.188, 0.134] & [-0.775, 0.620] & ($d$=0.095)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 2", hypothesis = "Mail-Bombing H3a")
> 
> 
> # Bombing H3b: Fox News treatment vs. HuffPost treatment
> 
> trt <- "FoxNews"
> dv <- "W4_PATA462_c_num"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "HuffPost", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error   t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews -0.1398063  0.1295001 -1.079584 0.2807165
                                 CI Lower  CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.3940818 0.1144693 669
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: -0.027
Std. Error: 0.082
CI Lower: -0.188
CI Upper: 0.134
Lasso covariates, Adj R2 = 0.611
Covariates: party7 + ideo + diet_mean_pre
N = 680
All covariates, Adj R2 = 0.620
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> # power analysis
> pwr <- power2(dv, dim, itt, cace, covariates = TRUE, D = D, trt = trt)
MDE without covariate adjustment:
0.259 (15.2% of a 1-SD increase in DV)
MDE with covariate adjustment:
Covariates:  ~ W3_Browser_treatment_w3 + party7 + ideo + diet_mean_pre
0.161 (9.5% of a 1-SD increase in DV)
> 
> format_latex2(dim, itt, cace, trt, pwr,
+               dv = "H3b: Trump is accountable")
H3b: Trump is accountable & -0.140 (0.130) & -0.027 (0.082) & -1.363 (6.376) & 0.161\\ 
(FoxNews) & [-0.394, 0.114] & [-0.188, 0.134] & [-13.893, 11.167] & ($d$=0.095)\\
> 
> # collect p values
> update_pvals(dv, trt, dim, itt[[1]], cace, prereg = "Study 2", hypothesis = "Mail-Bombing H3b")
> 
> 
> 
> # Multiple testing / p values analysis ---------------------------------------------------------------
> 
> # collect all p values into data frame
> pval_df <- data.frame(
+   dv = c(dv_fn_vec, dv_hp_vec, dv_any_vec),
+   trt = c(rep("FoxNews", length(dv_fn_vec)), rep("HuffPost", length(dv_hp_vec)), rep("Any", length(dv_any_vec))),
+   dim_pval = as.numeric(c(dim_fn_pval_vec, dim_hp_pval_vec, dim_any_pval_vec)),
+   itt_pval = as.numeric(c(itt_fn_pval_vec, itt_hp_pval_vec, itt_any_pval_vec)),
+   cace_pval = as.numeric(c(cace_fn_pval_vec, cace_hp_pval_vec, cace_any_pval_vec)),
+   itt_cohd = as.numeric(c(itt_fn_cohd_vec, itt_hp_cohd_vec, itt_any_cohd_vec)),
+   prereg = c(prereg_fn_vec, prereg_hp_vec, prereg_any_vec),
+   hypothesis = c(hypothesis_fn_vec, hypothesis_hp_vec, hypothesis_any_vec),
+   stringsAsFactors = FALSE)
> pval_df$hypothesis_group <- str_replace(pval_df$hypothesis, "H[:digit:].*", "") %>% str_trim()
> 
> # store data
> #  save(pval_df, file = "surveydata/pval_df_updated.RData")
> # save(pval_df, file = "surveydata/pval_df.RData")
> 
> # remove RQs and non-pre-registered hypotheses 
> pval_df <- filter(pval_df, !str_detect(hypothesis, "RQ"), prereg != "No") 
> 
> # p-values adjustment for multiple comparisons, BH method
> 
> # all p-values
> pval_df$itt_pval_bh <- p.adjust(pval_df$itt_pval, method = "BH")
> pval_df$cace_pval_bh <- p.adjust(pval_df$cace_pval, method = "BH")
> 
> # pre-registered hypotheses
> pval_df$itt_pval_bh_prereg <- p.adjust(pval_df$itt_pval, method = "BH")
> pval_df$cace_pval_bh_prereg <- p.adjust(pval_df$cace_pval, method = "BH")
> 
> # pre-registered hypotheses, by study
> pval_df$itt_pval_bh_study1[pval_df$prereg == "Study 1"] <- p.adjust(pval_df$itt_pval[pval_df$prereg == "Study 1"], method = "BH")
> pval_df$cace_pval_bh_study1[pval_df$prereg == "Study 1"] <- p.adjust(pval_df$cace_pval[pval_df$prereg == "Study 1"], method = "BH")
> pval_df$itt_pval_bh_study2[pval_df$prereg == "Study 2"] <- p.adjust(pval_df$itt_pval[pval_df$prereg == "Study 2"], method = "BH")
> pval_df$cace_pval_bh_study2[pval_df$prereg == "Study 2"] <- p.adjust(pval_df$cace_pval[pval_df$prereg == "Study 2"], method = "BH")
> 
> 
> # p-values adjustment for multiple comparisons, two-stage step-up (Benjamini, Krieger and Yekutieli 2006)
> # BiocManager::install("multtest")
> 
> # all p-values
> pval_df$itt_pval_tsbh <- multtest::mt.rawp2adjp(as.numeric(pval_df$itt_pval), proc = "TSBH", alpha = 0.05, na.rm = TRUE)$adjp[,2][order(order(as.numeric(pval_df$itt_pval)))]
> pval_df$cace_pval_tsbh <- multtest::mt.rawp2adjp(as.numeric(pval_df$cace_pval), proc = "TSBH", alpha = 0.05, na.rm = TRUE)$adjp[,2][order(order(as.numeric(pval_df$cace_pval)))]
> 
> # pre-registered hypotheses
> pval_df$itt_pval_tsbh_prereg <- multtest::mt.rawp2adjp(as.numeric(pval_df$itt_pval), proc = "TSBH", alpha = 0.05, na.rm = TRUE)$adjp[,2][order(order(as.numeric(pval_df$itt_pval)))]
> pval_df$cace_pval_tsbh_prereg <- multtest::mt.rawp2adjp(as.numeric(pval_df$cace_pval), proc = "TSBH", alpha = 0.05, na.rm = TRUE)$adjp[,2][order(order(as.numeric(pval_df$cace_pval)))]
> 
> # pre-registered hypotheses, by study
> pval_df$itt_pval_tsbh_study1[pval_df$prereg == "Study 1"] <- multtest::mt.rawp2adjp(as.numeric(pval_df$itt_pval)[pval_df$prereg == "Study 1"], proc = "TSBH", alpha = 0.05, na.rm = TRUE)$adjp[,2][order(order(as.numeric(pval_df$itt_pval)[pval_df$prereg == "Study 1"]))]
> pval_df$cace_pval_tsbh_study1[pval_df$prereg == "Study 1"] <- multtest::mt.rawp2adjp(as.numeric(pval_df$cace_pval)[pval_df$prereg == "Study 1"], proc = "TSBH", alpha = 0.05, na.rm = TRUE)$adjp[,2][order(order(as.numeric(pval_df$cace_pval)[pval_df$prereg == "Study 1"]))]
> pval_df$itt_pval_tsbh_study2[pval_df$prereg == "Study 2"] <- multtest::mt.rawp2adjp(as.numeric(pval_df$itt_pval)[pval_df$prereg == "Study 2"], proc = "TSBH", alpha = 0.05, na.rm = TRUE)$adjp[,2][order(order(as.numeric(pval_df$itt_pval)[pval_df$prereg == "Study 2"]))]
> pval_df$cace_pval_tsbh_study2[pval_df$prereg == "Study 2"] <- multtest::mt.rawp2adjp(as.numeric(pval_df$cace_pval)[pval_df$prereg == "Study 2"], proc = "TSBH", alpha = 0.05, na.rm = TRUE)$adjp[,2][order(order(as.numeric(pval_df$cace_pval)[pval_df$prereg == "Study 2"]))]
> 
> # pre-registered hypotheses, by hypothesis group
> hypothesis_groups <- unique(pval_df$hypothesis_group)
> pval_tsbh_hypothesis_groups_itt <- list()
> pval_tsbh_hypothesis_groups_cace <- list()
> for (i in seq_along(hypothesis_groups)) {
+   pval_tsbh_hypothesis_groups_itt[[i]] <- multtest::mt.rawp2adjp(as.numeric(pval_df$itt_pval)[pval_df$hypothesis_group == hypothesis_groups[i]], proc = "TSBH", alpha = 0.05, na.rm = TRUE)$adjp[,2][order(order(as.numeric(pval_df$itt_pval)[pval_df$hypothesis_group == hypothesis_groups[i]]))]
+   pval_tsbh_hypothesis_groups_cace[[i]] <- multtest::mt.rawp2adjp(as.numeric(pval_df$cace_pval)[pval_df$hypothesis_group == hypothesis_groups[i]], proc = "TSBH", alpha = 0.05, na.rm = TRUE)$adjp[,2][order(order(as.numeric(pval_df$cace_pval)[pval_df$hypothesis_group == hypothesis_groups[i]]))]
+ }
> pval_df$itt_pval_tsbh_hypothesis_groups <- unlist(pval_tsbh_hypothesis_groups_itt)
> pval_df$cace_pval_tsbh_hypothesis_groups <- unlist(pval_tsbh_hypothesis_groups_cace)
> 
> 
> # put in right order
> pval_df$hypothesis <- factor(pval_df$hypothesis, levels = hypothesis_all_vec)
> pval_df <- arrange(pval_df, hypothesis)
> 
> # plot itt results
> pval_res_df <- dplyr::select(filter(pval_df, prereg != "No"), itt_pval, itt_pval_tsbh_prereg, itt_pval_tsbh_hypothesis_groups, itt_pval_tsbh_study1, itt_pval_tsbh_study2)
> pval_res_mat <- as.matrix(pval_res_df)
> rownames(pval_res_mat) <- pval_df$hypothesis
> #pval_res_mat <- pval_res_mat[rev(seq_len(nrow(pval_res_mat))),]
> colnames_mat <- c("Unadjusted\n", "Two-stage BH\n", "\nTwo-stage BH\n(Domain)", "Two-stage BH\n(Study 1)", "\nTwo-stage BH\n(Study 2)")
> get_palette <- colorRampPalette(RColorBrewer::brewer.pal(11, "RdYlGn"))
> 
> pdf(file="graphs/appendix_fig18.pdf", height=14, width=12, family="Helvetica")
> par(oma=c(0,0,0,0))
> par(mar=c(1,13,3,4))
> par(yaxs="i", xaxs="i", bty="n")
> plot(pval_res_mat, axis.row = NULL, axis.col = NULL, main = "", ylab = "", xlab = "", breaks = 20, col=get_palette(20), digits = 2, fmt.cell='%.2f', fmt.key='%.2f', na.print = FALSE)
> ## Draw the y-axis.
> axis(side = 2,
+      ## Rotate the labels.
+      las = 2,
+      at = rev(seq_along(rownames(pval_res_mat))),
+      label = rownames(pval_res_mat))
> axis(side = 3, 
+      at = seq_along(colnames_mat),
+      label = colnames_mat,
+      line = -.5,
+      tick = FALSE)
> dev.off()
null device 
          1 
> 
> # plot cace results
> pval_res_df <- dplyr::select(filter(pval_df, prereg != "No"), cace_pval, cace_pval_tsbh_prereg, cace_pval_tsbh_hypothesis_groups, cace_pval_tsbh_study1, cace_pval_tsbh_study2)
> pval_res_mat <- as.matrix(pval_res_df)
> rownames(pval_res_mat) <- pval_df$hypothesis
> #pval_res_mat <- pval_res_mat[rev(seq_len(nrow(pval_res_mat))),]
> colnames_mat <- c("Unadjusted\n", "Two-stage BH\n", "\nTwo-stage BH\n(Domain)", "Two-stage BH\n(Study 1)", "\nTwo-stage BH\n(Study 2)")
> get_palette <- colorRampPalette(RColorBrewer::brewer.pal(11, "RdYlGn"))
> 
> pdf(file="graphs/appendix_fig19.pdf", height=14, width=12, family="Helvetica")
> par(oma=c(0,0,0,0))
> par(mar=c(1,13,3,4))
> par(yaxs="i", xaxs="i", bty="n")
> plot(pval_res_mat, axis.row = NULL, axis.col = NULL, main = "", ylab = "", xlab = "", breaks = 20, col=get_palette(20), digits = 2, fmt.cell='%.2f', fmt.key='%.2f', na.print = FALSE)
> ## Draw the y-axis.
> axis(side = 2,
+      ## Rotate the labels.
+      las = 2,
+      at = rev(seq_along(rownames(pval_res_mat))),
+      label = rownames(pval_res_mat))
> axis(side = 3, 
+      at = seq_along(colnames_mat),
+      label = colnames_mat,
+      line = -.5,
+      tick = FALSE)
> dev.off()
null device 
          1 
> 
> # plot minimum detectable effects
> cohd_itt_res_df <- dplyr::select(filter(pval_df, prereg != "No"), itt_cohd)
> cohd_itt_res_mat <- as.matrix(cohd_itt_res_df)
> rownames(cohd_itt_res_mat) <- pval_df$hypothesis
> colnames_mat <- c("MDE (ITT)")
> get_palette <- colorRampPalette(RColorBrewer::brewer.pal(11, "RdYlGn"))
> 
> pdf(file="graphs/appendix_fig20.pdf", height=14, width=6, family="Helvetica")
> par(oma=c(0,0,0,0))
> par(mar=c(1,13,3,4))
> par(yaxs="i", xaxs="i", bty="n")
> plot(cohd_itt_res_mat, axis.row = NULL, axis.col = NULL, main = "", ylab = "", xlab = "",  breaks = 20, col=get_palette(20), digits = 2, fmt.cell='%.2f', fmt.key='%.2f', na.print = FALSE)
> ## Draw the y-axis.
> axis(side = 2,
+      ## Rotate the labels.
+      las = 2,
+      at = rev(seq_along(rownames(cohd_itt_res_mat))),
+      label = rownames(cohd_itt_res_mat))
> axis(side = 3, 
+      at = seq_along(colnames_mat),
+      label = colnames_mat,
+      line = -.5,
+      tick = FALSE)
> dev.off()
null device 
          1 
> 
> ## Summary table ##
> 
> results_table <- pval_df %>% select(9, 1:2, 8, 4:5, 13, 15)
> results_table <- results_table %>% mutate(support = case_when(itt_pval <= 0.05 ~ "+", 
+                                                               TRUE ~ ""))
> results_table %>% select(1:4, 9) %>% 
+   knitr::kable("latex", digits = 3, caption = "Results Summary: Hypotheses Tested")
\begin{table}

\caption{Results Summary: Hypotheses Tested}
\centering
\begin{tabular}[t]{l|l|l|l|l}
\hline
hypothesis\_group & dv & trt & hypothesis & support\\
\hline
Issue Opinions & issue\_scale & FoxNews & Issue Opinions H1 & \\
\hline
Issue Opinions & issue\_scale & HuffPost & Issue Opinions H2 & \\
\hline
Issue Opinions & imm\_issue\_scale & FoxNews & Issue Opinions H3 & \\
\hline
Issue Opinions & imm\_issue\_scale & HuffPost & Issue Opinions H4 & \\
\hline
News Browsing & log\_cons\_1w & FoxNews & News Browsing H1 & +\\
\hline
News Browsing & log\_lib\_1w & HuffPost & News Browsing H2 & \\
\hline
Social Media & log\_cons\_links & FoxNews & Social Media H1 & \\
\hline
Social Media & log\_lib\_links & HuffPost & Social Media H2 & \\
\hline
Social Media & log\_follows\_cons\_media & FoxNews & Social Media H3 & \\
\hline
Social Media & log\_follows\_lib\_media & HuffPost & Social Media H4 & \\
\hline
Affective Polarization & W4\_PATA450a\_num & HuffPost & Affective Polarization H1a & \\
\hline
Affective Polarization & W4\_PATA450b\_num & HuffPost & Affective Polarization H1b & +\\
\hline
Affective Polarization & W4\_PATA450e\_num & HuffPost & Affective Polarization H1c & \\
\hline
Affective Polarization & W4\_PATA450a\_num & FoxNews & Affective Polarization H2a & \\
\hline
Affective Polarization & W4\_PATA450b\_num & FoxNews & Affective Polarization H2b & \\
\hline
Affective Polarization & W4\_PATA450e\_num & FoxNews & Affective Polarization H2c & \\
\hline
Perceived Polarization & ppol & FoxNews & Perceived Polarization H1a & \\
\hline
Perceived Polarization & ppol & HuffPost & Perceived Polarization H1b & \\
\hline
Agenda Setting & agenda\_lean & FoxNews & Agenda Setting H1 & \\
\hline
Agenda Setting & agenda\_lean & HuffPost & Agenda Setting H2 & \\
\hline
Elite Approval & trump\_approve\_num & FoxNews & Elite Approval H1a & \\
\hline
Elite Approval & cong\_rep\_approve\_num & FoxNews & Elite Approval H1b & \\
\hline
Elite Approval & cong\_dem\_approve\_num & FoxNews & Elite Approval H1c & \\
\hline
Elite Approval & trump\_approve\_num & HuffPost & Elite Approval H2a & \\
\hline
Elite Approval & cong\_rep\_approve\_num & HuffPost & Elite Approval H2b & \\
\hline
Elite Approval & cong\_dem\_approve & HuffPost & Elite Approval H2c & \\
\hline
Media Trust & trust\_fox\_num & FoxNews & Media Trust H1a & \\
\hline
Media Trust & trust\_hp\_num & FoxNews & Media Trust H1b & +\\
\hline
Media Trust & trust\_hp\_num & HuffPost & Media Trust H2a & \\
\hline
Media Trust & trust\_fox\_num & HuffPost & Media Trust H2b & \\
\hline
Media Trust & bias\_num & FoxNews & Media Trust H3a & \\
\hline
Media Trust & bias\_num & HuffPost & Media Trust H3b & \\
\hline
Media Trust & trust\_num & FoxNews & Media Trust H4a & +\\
\hline
Media Trust & trust\_num & HuffPost & Media Trust H4b & \\
\hline
Factual Knowledge & W4\_PATA430a\_num & FoxNews & Factual Knowledge H1 & \\
\hline
Factual Knowledge & W4\_PATA430b\_num & HuffPost & Factual Knowledge H2 & \\
\hline
Election Prediction & predicted\_house\_winner\_gop & FoxNews & Election Prediction H1a & \\
\hline
Election Prediction & predicted\_vote\_share\_gop\_num & FoxNews & Election Prediction H1b & \\
\hline
Election Prediction & predicted\_district\_winner\_gop & FoxNews & Election Prediction H1c & \\
\hline
Election Prediction & predicted\_house\_winner\_dem & HuffPost & Election Prediction H2a & \\
\hline
Election Prediction & predicted\_vote\_share\_dem\_num & HuffPost & Election Prediction H2b & \\
\hline
Election Prediction & predicted\_district\_winner\_dem & HuffPost & Election Prediction H2c & \\
\hline
Prediction uncertainty & prediction\_certainty\_num & Any & Prediction uncertainty H3 & \\
\hline
Prediction uncertainty & prediction\_certainty\_num & Any & Prediction uncertainty H4 & \\
\hline
Mail-Bombing & W4\_PATA462\_a\_num & FoxNews & Mail-Bombing H1a & \\
\hline
Mail-Bombing & W4\_PATA462\_a\_num & FoxNews & Mail-Bombing H1b & \\
\hline
Mail-Bombing & W4\_PATA462\_b\_num & FoxNews & Mail-Bombing H2a & \\
\hline
Mail-Bombing & W4\_PATA462\_b\_num & FoxNews & Mail-Bombing H2b & \\
\hline
Mail-Bombing & W4\_PATA462\_c\_num & FoxNews & Mail-Bombing H3a & \\
\hline
Mail-Bombing & W4\_PATA462\_c\_num & FoxNews & Mail-Bombing H3b & \\
\hline
\end{tabular}
\end{table}
> 
> proc.time()
   user  system elapsed 
 17.613   0.913  18.606 
