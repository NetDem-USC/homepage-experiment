
R version 4.0.2 (2020-06-22) -- "Taking Off Again"
Copyright (C) 2020 The R Foundation for Statistical Computing
Platform: x86_64-apple-darwin17.0 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

[Previously saved workspace restored]

> #===============================================================================
> #  File:    02-main-results.R
> #  Date:    Feb 3, 2021
> #  Purpose: replicate Figs 3+4 and paper results re: impact of encouragement on
> #            key outcome variables
> #  Data In: 
> #           ./data/survey_data.csv
> #           ./data/daily_pulse_data.csv
> #===============================================================================
> 
> # PACKAGES
> #===============================================================================
> library(dplyr)

Attaching package: ‘dplyr’

The following objects are masked from ‘package:stats’:

    filter, lag

The following objects are masked from ‘package:base’:

    intersect, setdiff, setequal, union

> library(readr)
> library(estimatr)
> library(glmnet)
Loading required package: Matrix
Loaded glmnet 4.0-2
> library(reshape2)
> library(ggplot2)
> library(cowplot)

********************************************************
Note: As of version 1.0.0, cowplot does not change the
  default ggplot2 theme anymore. To recover the previous
  behavior, execute:
  theme_set(theme_cowplot())
********************************************************

> library(stringr)
> source('code/functions.r')
> 
> # DATA
> #===============================================================================
> pulse <- read_csv("data/daily_pulse_data.csv")

── Column specification ────────────────────────────────────────────────────────
cols(
  .default = col_double(),
  id = col_character(),
  date = col_date(format = "")
)
ℹ Use `spec()` for the full column specifications.

> svy <- read_csv("data/survey_data.csv")

── Column specification ────────────────────────────────────────────────────────
cols(
  .default = col_double(),
  id = col_character(),
  partylean = col_character(),
  raceeth = col_character(),
  employ = col_character(),
  W1_endtime = col_datetime(format = ""),
  W2_endtime = col_datetime(format = ""),
  W3_PATA306_treatment_w3 = col_character(),
  W3_Browser_treatment_w3 = col_character(),
  starttime_w3 = col_datetime(format = ""),
  endtime_w3 = col_datetime(format = ""),
  endtime = col_datetime(format = ""),
  W5_endtime = col_datetime(format = ""),
  W6_endtime = col_datetime(format = ""),
  endtime_w7 = col_datetime(format = ""),
  endtime_w8 = col_datetime(format = ""),
  predicted_house_winner_gop = col_logical(),
  predicted_district_winner_gop = col_logical(),
  predicted_house_winner_dem = col_logical(),
  predicted_district_winner_dem = col_logical()
)
ℹ Use `spec()` for the full column specifications.

> 
> # SAMPLE SIZE
> #===============================================================================
> # respondents who received the encouragement and consented to wave 4
> sum(!is.na(svy$W3_PATA306_treatment_w3) & !is.na(svy$W4_consent))
[1] 1037
> # Dropping observations where treatment is missing
> svy <- svy[!is.na(svy$W3_PATA306_treatment_w3),]
> 
> # FIGURE 4
> #===============================================================================
> # creating affective polarization variable
> svy <- svy %>% 
+   mutate(affpol_out = case_when(
+     party7 < 4 ~ as.integer(W4_PATA450a)-as.integer(W4_PATA450b),
+     party7 > 4 & party7 < 8 ~ as.integer(W4_PATA450b)-as.integer(W4_PATA450a),
+     TRUE ~ NA_integer_),
+          affpol_pre = case_when(
+            party7 < 4 ~ as.integer(W2_PATA2_3_Dem)-as.integer(W2_PATA2_3_Rep),
+     party7 > 4 & party7 < 8 ~ as.integer(W2_PATA2_3_Rep)-as.integer(W2_PATA2_3_Dem),
+     TRUE ~ NA_integer_))
> 
> # standardize DVs
> svy$trust <- svy$trust/sd(svy$trust[which(svy$W3_PATA306_treatment_w3 == "Control")], na.rm = TRUE)
> svy$issue_scale <- svy$issue_scale/sd(svy$issue_scale[which(svy$W3_PATA306_treatment_w3 == "Control")], na.rm = TRUE)
> svy$imm_issue_scale <- svy$imm_issue_scale/sd(svy$imm_issue_scale[which(svy$W3_PATA306_treatment_w3 == "Control")], na.rm = TRUE)
> svy$W4_PATA450b <- svy$W4_PATA450b/sd(svy$W4_PATA450b[which(svy$W3_PATA306_treatment_w3 == "Control")], na.rm = TRUE)
> svy$W4_PATA450a <- svy$W4_PATA450a/sd(svy$W4_PATA450a[which(svy$W3_PATA306_treatment_w3 == "Control")], na.rm = TRUE)
> svy$affpol_out <- svy$affpol_out/sd(svy$affpol_out[which(svy$W3_PATA306_treatment_w3 == "Control")], na.rm = TRUE)
> svy$vote_after <- svy$vote_after/sd(svy$vote_after[which(svy$W3_PATA306_treatment_w3 == "Control")], na.rm = TRUE)
> svy$ppol <- svy$ppol/sd(svy$ppol[which(svy$W3_PATA306_treatment_w3 == "Control")], na.rm = TRUE)
> svy$agenda_lean <- svy$agenda_lean/sd(svy$agenda_lean[which(svy$W3_PATA306_treatment_w3 == "Control")], na.rm = TRUE)
> 
> svy$trump_approve_num <- as.numeric(svy$trump_approve)
> svy$cong_dem_approve_num <- as.numeric(svy$cong_dem_approve)
> svy$cong_rep_approve_num <- as.numeric(svy$cong_rep_approve)
> 
> svy$trump_approve_num <- svy$trump_approve_num/sd(svy$trump_approve_num[which(svy$W3_PATA306_treatment_w3 == "Control")], na.rm = TRUE)
> svy$cong_dem_approve_num <- svy$cong_dem_approve_num/sd(svy$cong_dem_approve_num[which(svy$W3_PATA306_treatment_w3 == "Control")], na.rm = TRUE)
> svy$cong_rep_approve_num <- svy$cong_rep_approve_num/sd(svy$cong_rep_approve_num[which(svy$W3_PATA306_treatment_w3 == "Control")], na.rm = TRUE)
> 
> # potential control variables across all models
> vars <- c("party7", "age", "agesq", "female", "raceeth", "educ",
+           "ideo", "income", "employ", "state", "polint", "freq_tv", "freq_np", 
+           "freq_rad", "freq_net", "freq_disc", "log_news_pre", "diet_mean_pre")
> 
> ests <- NULL
> 
> ########################################################
> ### Issue H1: issue opinions, Fox News treatment
> ########################################################
> 
> trt <- "FoxNews"
> dv <- "issue_scale"
> dv_pre <- "issue_scale_pre"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error   t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews 0.02344049 0.08224576 0.2850054 0.7757493
                                 CI Lower  CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.1381204 0.1850013 540
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: -0.042
Std. Error: 0.034
CI Lower: -0.109
CI Upper: 0.026
Pre-treatment DV, Adj R2 = 0.826
N = 552
Lasso covariates, Adj R2 = 0.841
Covariates: party7 + ideo + issue_scale_pre
N = 542
All covariates, Adj R2 = 0.843
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 384
> 
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> dat0 <- itt[[1]] %>% tidy() %>% slice(2) %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value) %>%
+   mutate(estimand = "ITT")
> dat <- cace %>% tidy() %>% filter(term == "comp_fn") %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value)
> dat <- dat %>% mutate(estimand = "CACE")
> dat0$outcome <- "Issue scale (conservatism)"
> dat0$trt <- "Fox News"
> dat$outcome <- "Issue scale (conservatism)"
> dat$trt <- "Fox News"
> 
> ests <- rbind(ests, dat, dat0)
> 
> ########################################################
> ### Issue H2: issue opinions, HuffPost treatment
> ########################################################
> 
> trt <- "HuffPost"
> dv <- "issue_scale"
> dv_pre <- "issue_scale_pre"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error   t value  Pr(>|t|)
W3_PATA306_treatment_w3HuffPost -0.1050781 0.08151921 -1.288998 0.1979426
                                  CI Lower   CI Upper  DF
W3_PATA306_treatment_w3HuffPost -0.2652065 0.05505027 548
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: -0.033
Std. Error: 0.035
CI Lower: -0.101
CI Upper: 0.035
Pre-treatment DV, Adj R2 = 0.813
N = 560
Lasso covariates, Adj R2 = 0.831
Covariates: party7 + ideo + issue_scale_pre
N = 544
All covariates, Adj R2 = 0.843
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 383
> 
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> dat0 <- itt[[1]] %>% tidy() %>% slice(2) %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value) %>%
+   mutate(estimand = "ITT")
> dat <- cace %>% tidy() %>% filter(term == "comp_hp") %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value)
> dat <- dat %>% mutate(estimand = "CACE")
> dat0$outcome <- "Issue scale (conservatism)"
> dat0$trt <- "HuffPost"
> dat$outcome <- "Issue scale (conservatism)"
> dat$trt <- "HuffPost"
> ests <- rbind(ests, dat, dat0)
> 
> 
> ########################################################
> ### Turnout RQ1a: Fox News
> ########################################################
> 
> trt <- "FoxNews"
> dv <- "vote_after"
> dv_pre <- "vote_pre"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error   t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews -0.1007177 0.07688238 -1.310024 0.1906022
                                CI Lower  CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.251656 0.0502206 726
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: -0.085
Std. Error: 0.068
CI Lower: -0.218
CI Upper: 0.048
Pre-treatment DV, Adj R2 = 0.233
N = 738
Lasso covariates, Adj R2 = 0.233
Covariates: vote_pre
N = 738
All covariates, Adj R2 = 0.290
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
> 
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> dat0 <- itt[[1]] %>% tidy() %>% slice(2) %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value) %>%
+   mutate(estimand = "ITT")
> dat <- cace %>% tidy() %>% filter(term == "comp_fn") %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value)
> dat <- dat %>% mutate(estimand = "CACE")
> dat0$outcome <- "Self-reported vote turnout"
> dat0$trt <- "Fox News"
> dat$outcome <- "Self-reported vote turnout"
> dat$trt <- "Fox News"
> ests <- rbind(ests, dat, dat0)
> 
> ########################################################
> ### Turnout RQ1a: Huff Post
> ########################################################
> 
> trt <- "HuffPost"
> dv <- "vote_after"
> dv_pre <- "vote_pre"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error  t value  Pr(>|t|)
W3_PATA306_treatment_w3HuffPost 0.0988166 0.06968008 1.418147 0.1565775
                                   CI Lower  CI Upper  DF
W3_PATA306_treatment_w3HuffPost -0.03798222 0.2356154 725
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: 0.072
Std. Error: 0.062
CI Lower: -0.050
CI Upper: 0.193
Pre-treatment DV, Adj R2 = 0.220
N = 737
Lasso covariates, Adj R2 = 0.220
Covariates: vote_pre
N = 737
All covariates, Adj R2 = 0.254
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
> 
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> dat0 <- itt[[1]] %>% tidy() %>% slice(2) %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value) %>%
+   mutate(estimand = "ITT")
> dat <- cace %>% tidy() %>% filter(term == "comp_hp") %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value)
> dat <- dat %>% mutate(estimand = "CACE")
> dat0$outcome <- "Self-reported vote turnout"
> dat0$trt <- "HuffPost"
> dat$outcome <- "Self-reported vote turnout"
> dat$trt <- "HuffPost"
> ests <- rbind(ests, dat, dat0)
> 
> 
> ########################################################
> ### Affective H1b: HuffPost treatment
> ########################################################
> 
> trt <- "HuffPost"
> dv <- "affpol_out"
> dv_pre <- "affpol_pre"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error   t value Pr(>|t|)
W3_PATA306_treatment_w3HuffPost 0.04292526 0.08315476 0.5162094 0.605907
                                  CI Lower CI Upper  DF
W3_PATA306_treatment_w3HuffPost -0.1203994  0.20625 574
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: -0.021
Std. Error: 0.049
CI Lower: -0.116
CI Upper: 0.075
Pre-treatment DV, Adj R2 = 0.655
N = 583
Lasso covariates, Adj R2 = 0.655
Covariates: affpol_pre
N = 583
All covariates, Adj R2 = 0.658
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 388
> 
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> dat0 <- itt[[1]] %>% tidy() %>% slice(2) %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value) %>%
+   mutate(estimand = "ITT")
> dat <- cace %>% tidy() %>% filter(term == "comp_hp") %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value)
> dat <- dat %>% mutate(estimand = "CACE")
> dat0$outcome <- "Affective polarization"
> dat0$trt <- "HuffPost"
> dat$outcome <- "Affective polarization"
> dat$trt <- "HuffPost"
> ests <- rbind(ests, dat, dat0)
> 
> ########################################################
> ### Affective H2a: FoxNews treatment
> ########################################################
> 
> trt <- "FoxNews"
> dv <- "affpol_out" 
> dv_pre <- "affpol_pre"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error    t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews -0.03839981 0.08321796 -0.4614366 0.6446602
                                 CI Lower CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.2018487 0.125049 574
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: -0.064
Std. Error: 0.045
CI Lower: -0.153
CI Upper: 0.024
Pre-treatment DV, Adj R2 = 0.695
N = 585
Lasso covariates, Adj R2 = 0.695
Covariates: affpol_pre
N = 585
All covariates, Adj R2 = 0.708
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 399
> 
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> dat0 <- itt[[1]] %>% tidy() %>% slice(2) %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value) %>%
+   mutate(estimand = "ITT")
> dat <- cace %>% tidy() %>% filter(term == "comp_fn") %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value)
> dat <- dat %>% mutate(estimand = "CACE")
> dat0$outcome <- "Affective polarization"
> dat0$trt <- "Fox News"
> dat$outcome <- "Affective polarization"
> dat$trt <- "Fox News"
> ests <- rbind(ests, dat, dat0)
> 
> 
> ########################################################
> ### Media Trust H4a: Media trust for FN group
> ########################################################
> 
> trt <- "FoxNews"
> dv <- "trust"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error  t value   Pr(>|t|)
W3_PATA306_treatment_w3FoxNews -0.1237035 0.07429236 -1.66509 0.09635274
                                 CI Lower CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.2695719 0.022165 684
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: -0.131
Std. Error: 0.055
CI Lower: -0.240
CI Upper: -0.023
Lasso covariates, Adj R2 = 0.462
Covariates: party7 + ideo + polint + freq_np + diet_mean_pre
N = 674
All covariates, Adj R2 = 0.485
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
> 
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> dat0 <- itt[[1]] %>% tidy() %>% slice(2) %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value) %>%
+   mutate(estimand = "ITT")
> dat <- cace %>% tidy() %>% filter(term == "comp_fn") %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value)
> dat <- dat %>% mutate(estimand = "CACE")
> dat0$outcome <- "Media trust"
> dat0$trt <- "Fox News"
> dat$outcome <- "Media trust"
> dat$trt <- "Fox News"
> ests <- rbind(ests, dat, dat0)
> 
> ########################################################
> ### Media Trust H4b: Media trust for HP group
> ########################################################
> 
> trt <- "HuffPost"
> dv <- "trust"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error   t value  Pr(>|t|)
W3_PATA306_treatment_w3HuffPost 0.02733969 0.07568327 0.3612382 0.7180329
                                  CI Lower  CI Upper  DF
W3_PATA306_treatment_w3HuffPost -0.1212597 0.1759391 684
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: -0.088
Std. Error: 0.056
CI Lower: -0.198
CI Upper: 0.023
Lasso covariates, Adj R2 = 0.487
Covariates: party7 + ideo + polint + freq_np + diet_mean_pre
N = 668
All covariates, Adj R2 = 0.514
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
> 
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> dat0 <- itt[[1]] %>% tidy() %>% slice(2) %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value) %>%
+   mutate(estimand = "ITT")
> dat <- cace %>% tidy() %>% filter(term == "comp_hp") %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value)
> dat <- dat %>% mutate(estimand = "CACE")
> dat0$outcome <- "Media trust"
> dat0$trt <- "HuffPost"
> dat$outcome <- "Media trust"
> dat$trt <- "HuffPost"
> ests <- rbind(ests, dat, dat0)
> 
> 
> ########################################################
> ### Issue H3: immigration attitudes, FoxNews treatment
> ########################################################
> 
> trt <- "FoxNews"
> dv <- "imm_issue_scale"
> dv_pre <- "issue_scale_pre"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error   t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews 0.07083215 0.07494793 0.9450848 0.3449493
                                  CI Lower  CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.07632348 0.2179878 684
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt, more_vars = "policy14_imm_pre")
Estimate: 0.031
Std. Error: 0.047
CI Lower: -0.062
CI Upper: 0.123
Pre-treatment DV, Adj R2 = 0.329
N = 696
Lasso covariates, Adj R2 = 0.608
Covariates: party7 + ideo + issue_scale_pre + policy14_imm_pre
N = 680
All covariates, Adj R2 = 0.504
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
> 
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> dat0 <- itt[[1]] %>% tidy() %>% slice(2) %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value) %>%
+   mutate(estimand = "ITT")
> dat <- cace %>% tidy() %>% filter(term == "comp_fn") %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value)
> dat <- dat %>% mutate(estimand = "CACE")
> dat0$outcome <- "Pro-immigration attitudes"
> dat0$trt <- "Fox News"
> dat$outcome <- "Pro-immigration attitudes"
> dat$trt <- "Fox News"
> ests <- rbind(ests, dat, dat0)
> 
> ########################################################
> ### Issue H4: immigration attitudes, HuffPost treatment
> ########################################################
> 
> trt <- "HuffPost"
> dv <- "imm_issue_scale"
> dv_pre <- "issue_scale_pre"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error  t value    Pr(>|t|)
W3_PATA306_treatment_w3HuffPost 0.2217725  0.0743188 2.984069 0.002945784
                                  CI Lower  CI Upper  DF
W3_PATA306_treatment_w3HuffPost 0.07585209 0.3676928 684
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt, more_vars = "policy14_imm_pre")
Estimate: 0.070
Std. Error: 0.048
CI Lower: -0.024
CI Upper: 0.163
Pre-treatment DV, Adj R2 = 0.391
N = 696
Lasso covariates, Adj R2 = 0.623
Covariates: party7 + ideo + issue_scale_pre + policy14_imm_pre
N = 675
All covariates, Adj R2 = 0.547
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
> 
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> dat0 <- itt[[1]] %>% tidy() %>% slice(2) %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value) %>%
+   mutate(estimand = "ITT")
> dat <- cace %>% tidy() %>% filter(term == "comp_hp") %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value)
> dat <- dat %>% mutate(estimand = "CACE")
> dat0$outcome <- "Pro-immigration attitudes"
> dat0$trt <- "HuffPost"
> dat$outcome <- "Pro-immigration attitudes"
> dat$trt <- "HuffPost"
> ests <- rbind(ests, dat, dat0)
> 
> ########################################################
> ### Perceived H1a: FoxNews treatment
> ########################################################
> 
> trt <- "FoxNews"
> dv <- "ppol"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                               Estimate Std. Error  t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews 0.112425  0.0789858 1.423358 0.1550912
                                  CI Lower  CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.04266032 0.2675104 680
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: 0.112
Std. Error: 0.079
CI Lower: -0.043
CI Upper: 0.268
All covariates, Adj R2 = 0.003
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 462
> compute_proportion_missing_covars(itt)
0.0% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> dat0 <- itt[[1]] %>% tidy() %>% slice(2) %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value) %>%
+   mutate(estimand = "ITT")
> dat <- cace %>% tidy() %>% filter(term == "comp_fn") %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value)
> dat <- dat %>% mutate(estimand = "CACE")
> dat0$outcome <- "Perceived polarization"
> dat0$trt <- "Fox News"
> dat$outcome <- "Perceived polarization"
> dat$trt <- "Fox News"
> ests <- rbind(ests, dat, dat0)
> 
> ########################################################
> ### Perceived H1b: HuffPost treatment
> ########################################################
> 
> trt <- "HuffPost"
> dv <- "ppol" 
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error  t value  Pr(>|t|)
W3_PATA306_treatment_w3HuffPost 0.08870494 0.07786562 1.139205 0.2550186
                                 CI Lower  CI Upper  DF
W3_PATA306_treatment_w3HuffPost -0.064181 0.2415909 680
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: 0.089
Std. Error: 0.078
CI Lower: -0.064
CI Upper: 0.242
All covariates, Adj R2 = 0.004
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 457
> compute_proportion_missing_covars(itt)
0.0% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> dat0 <- itt[[1]] %>% tidy() %>% slice(2) %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value) %>%
+   mutate(estimand = "ITT")
> dat <- cace %>% tidy() %>% filter(term == "comp_hp") %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value)
> dat <- dat %>% mutate(estimand = "CACE")
> dat0$outcome <- "Perceived polarization"
> dat0$trt <- "HuffPost"
> dat$outcome <- "Perceived polarization"
> dat$trt <- "HuffPost"
> ests <- rbind(ests, dat, dat0)
> 
> 
> ########################################################
> ### Agenda H1: FoxNews treatment
> ########################################################
> 
> trt <- "FoxNews"
> dv <- "agenda_lean"
> dv_pre <- "agenda_lean_pre"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error   t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews 0.01322972 0.07574366 0.1746644 0.8613954
                                 CI Lower  CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.1354902 0.1619497 679
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: 0.030
Std. Error: 0.043
CI Lower: -0.054
CI Upper: 0.115
Pre-treatment DV, Adj R2 = 0.632
N = 691
Lasso covariates, Adj R2 = 0.695
Covariates: party7 + ideo + diet_mean_pre + agenda_lean_pre
N = 675
All covariates, Adj R2 = 0.713
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 459
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> dat0 <- itt[[1]] %>% tidy() %>% slice(2) %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value) %>%
+   mutate(estimand = "ITT")
> dat <- cace %>% tidy() %>% filter(term == "comp_fn") %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value)
> dat <- dat %>% mutate(estimand = "CACE")
> dat0$outcome <- "Agenda setting"
> dat0$trt <- "Fox News"
> dat$outcome <- "Agenda setting"
> dat$trt <- "Fox News"
> ests <- rbind(ests, dat, dat0)
> 
> ########################################################
> ### Agenda H2: HuffPost treatment
> ########################################################
> 
> trt <- "HuffPost"
> dv <- "agenda_lean"
> dv_pre <- "agenda_lean_pre"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error  t value  Pr(>|t|)
W3_PATA306_treatment_w3HuffPost 0.1609881  0.0751654 2.141784 0.0325655
                                  CI Lower  CI Upper  DF
W3_PATA306_treatment_w3HuffPost 0.01340389 0.3085722 680
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: 0.036
Std. Error: 0.043
CI Lower: -0.049
CI Upper: 0.120
Pre-treatment DV, Adj R2 = 0.660
N = 692
Lasso covariates, Adj R2 = 0.704
Covariates: party7 + ideo + diet_mean_pre + agenda_lean_pre
N = 671
All covariates, Adj R2 = 0.731
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 455
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> dat0 <- itt[[1]] %>% tidy() %>% slice(2) %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value) %>%
+   mutate(estimand = "ITT")
> dat <- cace %>% tidy() %>% filter(term == "comp_hp") %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value)
> dat <- dat %>% mutate(estimand = "CACE")
> dat0$outcome <- "Agenda setting"
> dat0$trt <- "HuffPost"
> dat$outcome <- "Agenda setting"
> dat$trt <- "HuffPost"
> ests <- rbind(ests, dat, dat0)
> 
> ########################################################
> ### Approval H1a: President
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> # svy$trump_approve_num <- as.numeric(svy$trump_approve)
> svy$trump_approve_pre_num <- as.numeric(svy$trump_approve_pre)
> 
> trt <- "FoxNews"
> dv <- "trump_approve_num"
> dv_pre <- "trump_approve_pre_num"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error    t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews 0.004967684 0.07562464 0.06568869 0.9476449
                                 CI Lower CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.1435166 0.153452 684
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: 0.021
Std. Error: 0.019
CI Lower: -0.016
CI Upper: 0.059
Pre-treatment DV, Adj R2 = 0.934
N = 696
Lasso covariates, Adj R2 = 0.937
Covariates: party7 + ideo + trump_approve_pre_num
N = 680
All covariates, Adj R2 = 0.948
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> dat0 <- itt[[1]] %>% tidy() %>% slice(2) %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value) %>%
+   mutate(estimand = "ITT")
> dat <- cace %>% tidy() %>% filter(term == "comp_fn") %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value)
> dat <- dat %>% mutate(estimand = "CACE")
> dat0$outcome <- "Approval: President"
> dat0$trt <- "Fox News"
> dat$outcome <- "Approval: President"
> dat$trt <- "Fox News"
> ests <- rbind(ests, dat, dat0)
> 
> ########################################################
> ### Approval H1b: Republicans in Congress [Congress control preference]
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> # svy$cong_rep_approve_num <- as.numeric(svy$cong_rep_approve)
> svy$cong_rep_approve_pre_num <- as.numeric(svy$cong_rep_approve_pre)
> 
> trt <- "FoxNews"
> dv <- "cong_rep_approve_num"
> dv_pre <- "cong_rep_approve_pre_num"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                   Estimate Std. Error     t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews -0.001764595 0.07361103 -0.02397188 0.9808816
                                 CI Lower  CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.1462805 0.1427513 726
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: 0.003
Std. Error: 0.027
CI Lower: -0.051
CI Upper: 0.057
Pre-treatment DV, Adj R2 = 0.854
N = 738
Lasso covariates, Adj R2 = 0.866
Covariates: party7 + ideo + cong_rep_approve_pre_num
N = 722
All covariates, Adj R2 = 0.932
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> dat0 <- itt[[1]] %>% tidy() %>% slice(2) %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value) %>%
+   mutate(estimand = "ITT")
> dat <- cace %>% tidy() %>% filter(term == "comp_fn") %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value)
> dat <- dat %>% mutate(estimand = "CACE")
> dat0$outcome <- "Approval: Reps in Congress"
> dat0$trt <- "Fox News"
> dat$outcome <- "Approval: Reps in Congress"
> dat$trt <- "Fox News"
> ests <- rbind(ests, dat, dat0)
> 
> ########################################################
> ### Approval H1c: Democrats in Congress [Congress control preference]
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> # svy$cong_dem_approve_num <- as.numeric(svy$cong_dem_approve)
> svy$cong_dem_approve_pre_num <- as.numeric(svy$cong_dem_approve_pre)
> 
> trt <- "FoxNews"
> dv <- "cong_dem_approve_num"
> dv_pre <- "cong_dem_approve_pre_num"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                 Estimate Std. Error   t value  Pr(>|t|)
W3_PATA306_treatment_w3FoxNews 0.01029013 0.07350278 0.1399964 0.8887016
                                 CI Lower  CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.1340132 0.1545935 726
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: 0.015
Std. Error: 0.040
CI Lower: -0.063
CI Upper: 0.092
Pre-treatment DV, Adj R2 = 0.713
N = 738
Lasso covariates, Adj R2 = 0.726
Covariates: party7 + ideo + cong_dem_approve_pre_num
N = 722
All covariates, Adj R2 = 0.843
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 463
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> dat0 <- itt[[1]] %>% tidy() %>% slice(2) %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value) %>%
+   mutate(estimand = "ITT")
> dat <- cace %>% tidy() %>% filter(term == "comp_fn") %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value)
> dat <- dat %>% mutate(estimand = "CACE")
> dat0$outcome <- "Approval: Dems in Congress"
> dat0$trt <- "Fox News"
> dat$outcome <- "Approval: Dems in Congress"
> dat$trt <- "Fox News"
> ests <- rbind(ests, dat, dat0)
> 
> ########################################################
> ### Approval H2a: President
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> # svy$trump_approve_num <- as.numeric(svy$trump_approve)
> svy$trump_approve_pre_num <- as.numeric(svy$trump_approve_pre)
> 
> trt <- "HuffPost"
> dv <- "trump_approve_num"
> dv_pre <- "trump_approve_pre_num"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error   t value   Pr(>|t|)
W3_PATA306_treatment_w3HuffPost -0.1241676  0.0738881 -1.680482 0.09332009
                                  CI Lower   CI Upper  DF
W3_PATA306_treatment_w3HuffPost -0.2692424 0.02090708 684
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: 0.025
Std. Error: 0.020
CI Lower: -0.014
CI Upper: 0.064
Pre-treatment DV, Adj R2 = 0.925
N = 696
Lasso covariates, Adj R2 = 0.932
Covariates: party7 + ideo + trump_approve_pre_num
N = 675
All covariates, Adj R2 = 0.934
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> dat0 <- itt[[1]] %>% tidy() %>% slice(2) %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value) %>%
+   mutate(estimand = "ITT")
> dat <- cace %>% tidy() %>% filter(term == "comp_hp") %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value)
> dat <- dat %>% mutate(estimand = "CACE")
> dat0$outcome <- "Approval: President"
> dat0$trt <- "HuffPost"
> dat$outcome <- "Approval: President"
> dat$trt <- "HuffPost"
> ests <- rbind(ests, dat, dat0)
> 
> ########################################################
> ### Approval H2b: Republicans in Congress [Congress control preference]
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> # svy$cong_rep_approve_num <- as.numeric(svy$cong_rep_approve)
> svy$cong_rep_approve_pre_num <- as.numeric(svy$cong_rep_approve_pre)
> 
> trt <- "HuffPost"
> dv <- "cong_rep_approve_num"
> dv_pre <- "cong_rep_approve_pre_num"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error   t value  Pr(>|t|)
W3_PATA306_treatment_w3HuffPost -0.1112029 0.07184152 -1.547892 0.1220846
                                  CI Lower   CI Upper  DF
W3_PATA306_treatment_w3HuffPost -0.2522452 0.02983932 725
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: 0.005
Std. Error: 0.031
CI Lower: -0.056
CI Upper: 0.065
Pre-treatment DV, Adj R2 = 0.829
N = 737
Lasso covariates, Adj R2 = 0.837
Covariates: party7 + ideo + cong_rep_approve_pre_num
N = 715
All covariates, Adj R2 = 0.886
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> dat0 <- itt[[1]] %>% tidy() %>% slice(2) %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value) %>%
+   mutate(estimand = "ITT")
> dat <- cace %>% tidy() %>% filter(term == "comp_hp") %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value)
> dat <- dat %>% mutate(estimand = "CACE")
> dat0$outcome <- "Approval: Reps in Congress"
> dat0$trt <- "HuffPost"
> dat$outcome <- "Approval: Reps in Congress"
> dat$trt <- "HuffPost"
> ests <- rbind(ests, dat, dat0)
> 
> ########################################################
> ### Approval H2c: Democrats in Congress [Congress control preference]
> ########################################################
> 
> # creating numeric dvs to avoid labelled error
> # svy$cong_dem_approve_num <- as.numeric(svy$cong_dem_approve)
> svy$cong_dem_approve_pre_num <- as.numeric(svy$cong_dem_approve_pre)
> 
> trt <- "HuffPost"
> dv <- "cong_dem_approve"
> dv_pre <- "cong_dem_approve_pre"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error t value  Pr(>|t|)
W3_PATA306_treatment_w3HuffPost 0.05089763 0.03642309  1.3974 0.1627208
                                  CI Lower CI Upper  DF
W3_PATA306_treatment_w3HuffPost -0.0206097 0.122405 725
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, dv_pre = dv_pre, trt = trt)
Estimate: -0.003
Std. Error: 0.020
CI Lower: -0.042
CI Upper: 0.037
Pre-treatment DV, Adj R2 = 0.697
N = 737
Lasso covariates, Adj R2 = 0.718
Covariates: party7 + ideo + cong_dem_approve_pre
N = 715
All covariates, Adj R2 = 0.815
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 458
> compute_proportion_missing_covars(itt)
2.6% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> 
> dat0 <- itt[[1]] %>% tidy() %>% slice(2) %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value) %>%
+   mutate(estimand = "ITT")
> dat <- cace %>% tidy() %>% filter(term == "comp_hp") %>% dplyr::select(estimate, conf.low, conf.high, std.error, p.value) %>%
+   mutate(estimand = "CACE")
> dat0$outcome <- "Approval: Dems in Congress"
> dat0$trt <- "HuffPost"
> dat$outcome <- "Approval: Dems in Congress"
> dat$trt <- "HuffPost"
> ests <- rbind(ests, dat, dat0)
> 
> ests$outcome[grep("immig", ests$outcome)] <- "Immigration issue scale"
> ests$study <- "Study 1"
> ests$study[13:16] <- "Study 2"
> ests$outcome_factor <- factor(ests$outcome, levels=rev(unique(ests$outcome)))
> 
> 
> ########################################################
> ### Creating figure in paper
> ########################################################
> 
> g <- ggplot(data = filter(ests, estimand == "CACE"), aes(y=estimate, x=outcome_factor, color=trt)) + 
+   facet_grid(rows = vars(study), space = "free", scales = "free") +
+   geom_hline(yintercept = 0, colour = gray(1/2), lty = 2) + 
+   geom_pointrange(aes(y = estimate, 
+                       ymin = conf.low,
+                       ymax = conf.high), position=position_dodge(width=-.5))+
+   scale_color_manual("Treatment", values=c("red", "blue")) +
+   ylim(c(-1.33, 1.33)) + 
+   xlab("") + ylab("") + 
+   coord_flip() + theme_minimal() + theme(legend.position = "bottom")
> g
Warning messages:
1: position_dodge requires non-overlapping x intervals 
2: position_dodge requires non-overlapping x intervals 
> 
> ggsave(g, file = "graphs/main-fig4.pdf", width = 6, height = 8)
Warning messages:
1: position_dodge requires non-overlapping x intervals 
2: position_dodge requires non-overlapping x intervals 
> ggsave(g, file = "graphs/main-fig4.png", width = 6, height = 8)
Warning messages:
1: position_dodge requires non-overlapping x intervals 
2: position_dodge requires non-overlapping x intervals 
> 
> # results highlighted in manuscript
> ests %>% filter(estimand == "CACE" & outcome_factor == "Media trust")
    estimate   conf.low   conf.high std.error    p.value estimand     outcome
1 -0.5644739 -1.0430267 -0.08592118 0.2435146 0.02089032     CACE Media trust
2 -0.3967648 -0.8570063  0.06347678 0.2341885 0.09091856     CACE Media trust
       trt   study outcome_factor
1 Fox News Study 2    Media trust
2 HuffPost Study 2    Media trust
> 
> 
> # Long-term effects
> #===============================================================================
> 
> svy$trust_w7 <- svy$trust_w7/sd(svy$trust_w7[which(svy$W3_PATA306_treatment_w3 == "Control")], na.rm = TRUE)
> 
> ########################################################
> ### Media Trust H4a: Media trust for FN group (w7)
> ########################################################
> 
> trt <- "FoxNews"
> dv <- "trust_w7"
> D <- "comp_fn"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error  t value Pr(>|t|)
W3_PATA306_treatment_w3FoxNews -0.09616995 0.07676953 -1.25271 0.210779
                                 CI Lower   CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.2469269 0.05458703 626
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: -0.128
Std. Error: 0.056
CI Lower: -0.237
CI Upper: -0.018
Lasso covariates, Adj R2 = 0.496
Covariates: party7 + agesq + ideo + freq_tv + freq_np + diet_mean_pre
N = 617
All covariates, Adj R2 = 0.503
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 416
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> cace$coefficients[D]
   comp_fn 
-0.5439163 
> cace$p.value[D]
 comp_fn 
0.031908 
> 
> ########################################################
> ### Media Trust H4b: Media trust for HP group (w7)
> ########################################################
> 
> trt <- "HuffPost"
> dv <- "trust_w7"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                   Estimate Std. Error    t value  Pr(>|t|)
W3_PATA306_treatment_w3HuffPost -0.04723691 0.07645368 -0.6178501 0.5368953
                                  CI Lower  CI Upper  DF
W3_PATA306_treatment_w3HuffPost -0.1973691 0.1028952 636
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: -0.159
Std. Error: 0.057
CI Lower: -0.272
CI Upper: -0.047
Lasso covariates, Adj R2 = 0.472
Covariates: party7 + agesq + ideo + freq_tv + freq_np + diet_mean_pre
N = 619
All covariates, Adj R2 = 0.486
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 416
> compute_proportion_missing_covars(itt)
3.9% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> cace$coefficients[D]
   comp_hp 
-0.6981843 
> cace$p.value[D]
    comp_hp 
0.009083659 
> 
> ########################################################
> ### Media Trust H4a: Media trust for FN group (w8)
> ########################################################
> 
> svy$trust_w8 <- svy$trust_w8/sd(svy$trust_w8[which(svy$W3_PATA306_treatment_w3 == "Control")], na.rm = TRUE)
> 
> trt <- "FoxNews"
> dv <- "trust_w8"
> D <- "comp_fn"
> 
> # resetting after het fx analysis
> vars <- c("party7", "age", "agesq", "female", "raceeth", "educ",
+           "ideo", "income", "employ", "state", "polint", "freq_tv", "freq_np", 
+           "freq_rad", "freq_net", "freq_disc", "log_news_pre", "diet_mean_pre")
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                  Estimate Std. Error    t value Pr(>|t|)
W3_PATA306_treatment_w3FoxNews -0.07760902 0.07796273 -0.9954631 0.319902
                                CI Lower   CI Upper  DF
W3_PATA306_treatment_w3FoxNews -0.230714 0.07549595 616
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: -0.086
Std. Error: 0.054
CI Lower: -0.193
CI Upper: 0.020
Lasso covariates, Adj R2 = 0.536
Covariates: party7 + ideo + freq_np + diet_mean_pre
N = 610
All covariates, Adj R2 = 0.565
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 405
> compute_proportion_missing_covars(itt)
3.5% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> cace$coefficients[D]
  comp_fn 
-0.484833 
> cace$p.value[D]
   comp_fn 
0.05573503 
> 
> ########################################################
> ### Media Trust H4b: Media trust for HP group (w8)
> ########################################################
> 
> trt <- "HuffPost"
> dv <- "trust_w8"
> D <- "comp_hp"
> 
> ## DIM
> (dim <- difference_in_means(formula(paste0(dv, " ~ W3_PATA306_treatment_w3")), 
+                             blocks = W3_Browser_treatment_w3, 
+                             data = svy, 
+                             condition1 = "Control", 
+                             condition2 = trt))
Design:  Blocked 
                                   Estimate Std. Error    t value  Pr(>|t|)
W3_PATA306_treatment_w3HuffPost 0.001145906 0.07796746 0.01469724 0.9882785
                                  CI Lower  CI Upper  DF
W3_PATA306_treatment_w3HuffPost -0.1519708 0.1542626 611
> ## ITT, with Lin's covariate adjustment
> itt <- run_model(dv = dv, trt = trt)
Estimate: -0.099
Std. Error: 0.057
CI Lower: -0.212
CI Upper: 0.013
Lasso covariates, Adj R2 = 0.506
Covariates: party7 + ideo + freq_np + diet_mean_pre
N = 599
All covariates, Adj R2 = 0.527
Covariates: party7 + age + agesq + female + raceeth + educ + ideo + income + employ + state + polint + freq_tv + freq_np + freq_rad + freq_net + freq_disc + log_news_pre + diet_mean_pre
N = 394
> compute_proportion_missing_covars(itt)
3.5% missing
> ## CACE
> cace <- estimate_cace(Y=dv, D = D, Z = "W3_PATA306_treatment_w3",
+                       X = extract_covariates(itt), trt=trt)
> cace$coefficients[D]
   comp_hp 
-0.5355512 
> cace$p.value[D]
   comp_hp 
0.03516258 
> 
> # substantive magnitude?
> svy %>% mutate(ideo2 = case_when(
+   ideo %in% c(1, 2) ~ 'Liberals',
+   ideo %in% c(4, 5) ~ 'Conservatives')) %>% 
+   group_by(ideo2) %>% 
+   summarize(avg_trust = mean(trust, na.rm = TRUE))
# A tibble: 3 x 2
  ideo2         avg_trust
* <chr>             <dbl>
1 Conservatives      1.91
2 Liberals           3.33
3 <NA>               2.73
> # difference:
> 3.33 - 1.91 # = 1.42
[1] 1.42
> .55 / 1.42
[1] 0.3873239
> 
> 
> 
> proc.time()
   user  system elapsed 
  5.460   0.367   5.861 
